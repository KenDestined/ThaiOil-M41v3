import{f as r,L as Ot,T as Nt,B as Ht,g as Bt,l as Jt}from"./formatter.js";import{S as $t,i as St,s as Et,e as l,t as T,a as n,c as m,d as et,f as t,g as k,h as at,D as Lt,E as Pt,n as Ct,w as Yt,x as jt,r as mt,u as _t,y as At,p as it,m as dt,v as ct,A as Ft}from"./vendor.js";import{m as It,E as Ut,T as qt}from"./ExportButton.js";function Mt(s,e,o){const h=s.slice();return h[4]=e[o],h}function Dt(s,e){let o,h,v=e[4].name+"",y,b,d,S,_,a,f=r(e[4].workType.staff.male.hours,2)+"",N,$,i,C=r(e[4].workType.staff.female.hours,2)+"",P,H,B,Y=r(e[4].workType.staff.total.hours,2)+"",j,u,c,L,A,F,J=r(e[4].workType.contractor.male.hours,2)+"",R,lt,ot,D=r(e[4].workType.contractor.female.hours,2)+"",W,ut,K,I=r(e[4].workType.contractor.total.hours,2)+"",X,st,M,U,rt,Z,q=r(e[4].workType.staff.male.hours+e[4].workType.contractor.male.hours,2)+"",Q,nt,x,O=r(e[4].workType.staff.female.hours+e[4].workType.contractor.female.hours,2)+"",V,pt,z,G=r(e[4].workType.staff.total.hours+e[4].workType.contractor.total.hours,2)+"",tt;return{key:s,first:null,c(){o=l("tr"),h=l("td"),y=T(v),d=n(),S=l("td"),S.textContent="Staff",_=n(),a=l("td"),N=T(f),$=n(),i=l("td"),P=T(C),H=n(),B=l("td"),j=T(Y),u=n(),c=l("tr"),L=l("td"),L.textContent="Contractor",A=n(),F=l("td"),R=T(J),lt=n(),ot=l("td"),W=T(D),ut=n(),K=l("td"),X=T(I),st=n(),M=l("tr"),U=l("td"),U.textContent="Total",rt=n(),Z=l("td"),Q=T(q),nt=n(),x=l("td"),V=T(O),pt=n(),z=l("td"),tt=T(G),m(h,"rowspan",b=3),m(h,"class","_col-total _company"),m(S,"class","_col-total _work-type"),m(L,"class","_col-total _work-type"),m(U,"class","_col-total _work-type-total"),m(Z,"class","_col-total _total"),m(x,"class","_col-total _total"),m(z,"class","_col-total _total"),this.first=o},m(E,w){et(E,o,w),t(o,h),t(h,y),t(o,d),t(o,S),t(o,_),t(o,a),t(a,N),t(o,$),t(o,i),t(i,P),t(o,H),t(o,B),t(B,j),et(E,u,w),et(E,c,w),t(c,L),t(c,A),t(c,F),t(F,R),t(c,lt),t(c,ot),t(ot,W),t(c,ut),t(c,K),t(K,X),et(E,st,w),et(E,M,w),t(M,U),t(M,rt),t(M,Z),t(Z,Q),t(M,nt),t(M,x),t(x,V),t(M,pt),t(M,z),t(z,tt)},p(E,w){e=E,w&1&&v!==(v=e[4].name+"")&&k(y,v),w&1&&f!==(f=r(e[4].workType.staff.male.hours,2)+"")&&k(N,f),w&1&&C!==(C=r(e[4].workType.staff.female.hours,2)+"")&&k(P,C),w&1&&Y!==(Y=r(e[4].workType.staff.total.hours,2)+"")&&k(j,Y),w&1&&J!==(J=r(e[4].workType.contractor.male.hours,2)+"")&&k(R,J),w&1&&D!==(D=r(e[4].workType.contractor.female.hours,2)+"")&&k(W,D),w&1&&I!==(I=r(e[4].workType.contractor.total.hours,2)+"")&&k(X,I),w&1&&q!==(q=r(e[4].workType.staff.male.hours+e[4].workType.contractor.male.hours,2)+"")&&k(Q,q),w&1&&O!==(O=r(e[4].workType.staff.female.hours+e[4].workType.contractor.female.hours,2)+"")&&k(V,O),w&1&&G!==(G=r(e[4].workType.staff.total.hours+e[4].workType.contractor.total.hours,2)+"")&&k(tt,G)},d(E){E&&at(o),E&&at(u),E&&at(c),E&&at(st),E&&at(M)}}}function zt(s){let e,o,h,v,y,b,d,S,_,a=[],f=new Map,N,$,i,C,P,H,B,Y=r(s[3]().male,2)+"",j,u,c,L=r(s[3]().female,2)+"",A,F,J,R=r(s[3]().total,2)+"",lt,ot,D,W,ut,K,I=r(s[2]().male,2)+"",X,st,M,U=r(s[2]().female,2)+"",rt,Z,q,Q=r(s[2]().total,2)+"",nt,x,O,V,pt,z,G=r(s[3]().male+s[2]().male,2)+"",tt,E,w,ht=r(s[3]().female+s[2]().female,2)+"",yt,vt,wt,gt=r(s[3]().total+s[2]().total,2)+"",kt,Tt=s[0];const bt=p=>p[4].id;for(let p=0;p<Tt.length;p+=1){let g=Mt(s,Tt,p),ft=bt(g);f.set(ft,a[p]=Dt(ft,g))}return{c(){e=l("div"),o=l("div"),h=T("Total Man-Hours "),v=T(s[1]),y=n(),b=l("table"),d=l("thead"),d.innerHTML=`<tr><th class="_head-col-total">Company</th> 
        <th class="_head-col-total">Work Type</th> 
        <th class="_head-col-total _male">Male</th> 
        <th class="_head-col-total _female">Female</th> 
        <th class="_head-col-total _total">Total</th></tr>`,S=n(),_=l("tbody");for(let p=0;p<a.length;p+=1)a[p].c();N=n(),$=l("tr"),i=l("td"),i.textContent="TOP GROUP",C=n(),P=l("td"),P.textContent="Staff",H=n(),B=l("td"),j=T(Y),u=n(),c=l("td"),A=T(L),F=n(),J=l("td"),lt=T(R),ot=n(),D=l("tr"),W=l("td"),W.textContent="Contractor",ut=n(),K=l("td"),X=T(I),st=n(),M=l("td"),rt=T(U),Z=n(),q=l("td"),nt=T(Q),x=n(),O=l("tr"),V=l("td"),V.textContent="Total",pt=n(),z=l("td"),tt=T(G),E=n(),w=l("td"),yt=T(ht),vt=n(),wt=l("td"),kt=T(gt),m(o,"class","_box-title push-bottom-2"),m(i,"rowspan",3),m(i,"class","_col-total _company-group"),m(P,"class","_col-total _work-type"),m(B,"class","_col-total _group"),m(c,"class","_col-total _group"),m(J,"class","_col-total _group"),m(W,"class","_col-total _work-type"),m(K,"class","_col-total _group"),m(M,"class","_col-total _group"),m(q,"class","_col-total _group"),m(V,"class","_col-total _work-type-group-total"),m(z,"class","_col-total _group-total"),m(w,"class","_col-total _group-total"),m(wt,"class","_col-total _group-grand-total"),m(b,"class","_total-table"),m(e,"class","box")},m(p,g){et(p,e,g),t(e,o),t(o,h),t(o,v),t(e,y),t(e,b),t(b,d),t(b,S),t(b,_);for(let ft=0;ft<a.length;ft+=1)a[ft].m(_,null);t(_,N),t(_,$),t($,i),t($,C),t($,P),t($,H),t($,B),t(B,j),t($,u),t($,c),t(c,A),t($,F),t($,J),t(J,lt),t(_,ot),t(_,D),t(D,W),t(D,ut),t(D,K),t(K,X),t(D,st),t(D,M),t(M,rt),t(D,Z),t(D,q),t(q,nt),t(_,x),t(_,O),t(O,V),t(O,pt),t(O,z),t(z,tt),t(O,E),t(O,w),t(w,yt),t(O,vt),t(O,wt),t(wt,kt)},p(p,[g]){g&2&&k(v,p[1]),g&1&&(Tt=p[0],a=Lt(a,g,bt,1,p,Tt,f,_,Pt,Dt,N,Mt)),g&8&&Y!==(Y=r(p[3]().male,2)+"")&&k(j,Y),g&8&&L!==(L=r(p[3]().female,2)+"")&&k(A,L),g&8&&R!==(R=r(p[3]().total,2)+"")&&k(lt,R),g&4&&I!==(I=r(p[2]().male,2)+"")&&k(X,I),g&4&&U!==(U=r(p[2]().female,2)+"")&&k(rt,U),g&4&&Q!==(Q=r(p[2]().total,2)+"")&&k(nt,Q),g&12&&G!==(G=r(p[3]().male+p[2]().male,2)+"")&&k(tt,G),g&12&&ht!==(ht=r(p[3]().female+p[2]().female,2)+"")&&k(yt,ht),g&12&&gt!==(gt=r(p[3]().total+p[2]().total,2)+"")&&k(kt,gt)},i:Ct,o:Ct,d(p){p&&at(e);for(let g=0;g<a.length;g+=1)a[g].d()}}}function Gt(s,e,o){let h,v,{companies:y=[]}=e,{year:b}=e;return s.$$set=d=>{"companies"in d&&o(0,y=d.companies),"year"in d&&o(1,b=d.year)},s.$$.update=()=>{s.$$.dirty&1&&o(3,h=()=>{let d=y.map(a=>a.workType.staff.male.hours).reduce((a,f)=>a+f,0),S=y.map(a=>a.workType.staff.female.hours).reduce((a,f)=>a+f,0),_=y.map(a=>a.workType.staff.total.hours).reduce((a,f)=>a+f,0);return{male:d,female:S,total:_}}),s.$$.dirty&1&&o(2,v=()=>{let d=y.map(a=>a.workType.contractor.male.hours).reduce((a,f)=>a+f,0),S=y.map(a=>a.workType.contractor.female.hours).reduce((a,f)=>a+f,0),_=y.map(a=>a.workType.contractor.total.hours).reduce((a,f)=>a+f,0);return{male:d,female:S,total:_}})},[y,b,v,h]}class Rt extends $t{constructor(e){super();St(this,e,Gt,zt,Et,{companies:0,year:1})}}function Wt(s){let e,o,h,v,y,b,d,S,_,a,f,N,$,i,C,P,H,B;o=new Ot({props:{isShow:s[0]}}),d=new Nt({props:{activeTab:s[4],tabs:It,isUnsavedChanges:!1}});function Y(u){s[8](u)}let j={label:"Year",name:"year",change:s[6],options:s[5],isHorizontal:!0};return s[3]!==void 0&&(j.value=s[3]),f=new Ht({props:j}),Yt.push(()=>jt(f,"value",Y)),C=new Ut({props:{onExport:s[7],isExport:s[1],canEdit:!1}}),H=new Rt({props:{year:s[3],companies:s[2]}}),{c(){e=l("main"),mt(o.$$.fragment),h=n(),v=l("div"),v.textContent="Man Hours",y=n(),b=l("div"),mt(d.$$.fragment),S=n(),_=l("div"),a=l("div"),mt(f.$$.fragment),$=n(),i=l("div"),mt(C.$$.fragment),P=n(),mt(H.$$.fragment),m(v,"class","text-center text-weight-bold push-bottom-3 _title svelte-1k6ldyi"),m(b,"class","push-bottom-3"),m(a,"class","is-flex"),m(_,"class","_filter-wrapper push-bottom-3 svelte-1k6ldyi"),m(e,"class","_data-management")},m(u,c){et(u,e,c),_t(o,e,null),t(e,h),t(e,v),t(e,y),t(e,b),_t(d,b,null),t(e,S),t(e,_),t(_,a),_t(f,a,null),t(_,$),t(_,i),_t(C,i,null),t(e,P),_t(H,e,null),B=!0},p(u,[c]){const L={};c&1&&(L.isShow=u[0]),o.$set(L);const A={};!N&&c&8&&(N=!0,A.value=u[3],At(()=>N=!1)),f.$set(A);const F={};c&2&&(F.isExport=u[1]),C.$set(F);const J={};c&8&&(J.year=u[3]),c&4&&(J.companies=u[2]),H.$set(J)},i(u){B||(it(o.$$.fragment,u),it(d.$$.fragment,u),it(f.$$.fragment,u),it(C.$$.fragment,u),it(H.$$.fragment,u),B=!0)},o(u){dt(o.$$.fragment,u),dt(d.$$.fragment,u),dt(f.$$.fragment,u),dt(C.$$.fragment,u),dt(H.$$.fragment,u),B=!1},d(u){u&&at(e),ct(o),ct(d),ct(f),ct(C),ct(H)}}}function Kt(s,e,o){let h=!0,v=!1,y=qt.Total,b;const S=new Date().getFullYear(),_=Bt();let a=S;Ft(async()=>{window.getData=()=>{const i=JSON.parse(document.getElementById("rawData").innerText);o(2,b=i.companies),o(1,v=i.isExport),o(0,h=!1)},window.getData()});function f(){const i={year:a,dataManagementName:"ManHoursTotal"};console.log(i),console.log(JSON.stringify(i)),o(0,h=!0),window.PerformSearch(JSON.stringify(i))}function N(){const i={year:a,finalData:Jt(0),dataManagementName:"ManHoursTotal"};console.log("onExport",JSON.stringify(i)),window.PerformExport(JSON.stringify(i))}function $(i){a=i,o(3,a)}return[h,v,b,a,y,_,f,N,$]}class Qt extends $t{constructor(e){super();St(this,e,Kt,Wt,Et,{})}}new Qt({target:document.getElementById("app")});
