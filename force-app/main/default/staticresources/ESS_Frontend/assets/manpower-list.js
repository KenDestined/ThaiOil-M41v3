import{S as Oe,i as qe,s as ze,h as c,m as X,o as g,j as w,a as j,p as o,ab as ie,q as re,a3 as ye,d as T,M as Ge,w as C,x as k,t as h,b as y,y as S,D as Je,C as Ye,z as We,A as se,R as Y,B as R,aW as Ke,F as A,G as E}from"./MainLayout.js";import{t as W}from"./formatter.js";import{C as Pe}from"./Collapse.js";import{C as Se}from"./Card.js";import{B as je}from"./BaseInput.js";import{B as Te}from"./Button.js";import{T as Qe}from"./TypeofServiceDropdown.js";import{O as Ue}from"./ObjectiveDropdown.js";import{C as Ve}from"./CurrentStatusDropdown.js";import{C as Ne,T as Xe}from"./Table.js";import{E as V}from"./ESS_Manpower.service.js";import{D as le}from"./DateRange.js";import"./Label.js";import"./Dropdown.js";import"./html.js";import"./_commonjsHelpers.js";import"./flatpickr.js";function Me(n){let t;return{c(){t=c("span"),t.textContent="NEW",w(t,"class","badge badge-lg _badge svelte-fn1tax")},m(l,i){j(l,t,i)},d(l){l&&T(t)}}}function Ze(n){let t,l,i,u,d,v,r=n[1].isNew&&Me();return{c(){t=c("span"),l=c("span"),i=X(n[0]),u=g(),r&&r.c(),w(l,"class","link link-primary")},m(m,e){j(m,t,e),o(t,l),o(l,i),o(t,u),r&&r.m(t,null),d||(v=ie(t,"click",n[3]),d=!0)},p(m,[e]){e&1&&re(i,m[0]),m[1].isNew?r||(r=Me(),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i:ye,o:ye,d(m){m&&T(t),r&&r.d(),d=!1,v()}}}function xe(n,t,l){let{cell:i}=t,{row:u}=t,{click:d}=t;const v=()=>d(u);return n.$$set=r=>{"cell"in r&&l(0,i=r.cell),"row"in r&&l(1,u=r.row),"click"in r&&l(2,d=r.click)},[i,u,d,v]}class et extends Oe{constructor(t){super(),qe(this,t,xe,Ze,ze,{cell:0,row:1,click:2})}}function tt(n){let t,l,i,u,d,v,r,m,e,p,b,D;return{c(){t=c("div"),t.textContent="Manpower Service",l=g(),i=c("div"),u=c("div"),u.innerHTML=`<div class="mb-2"><span class="icon"><i class="ic ic-new text-[3.6rem]"></i></span></div> 
        <div class="font-weight-bold">New Request</div>`,d=g(),v=c("div"),r=c("span"),m=X(n[1]),e=g(),p=c("div"),p.innerHTML=`<div class="mb-2"><span class="icon"><i class="ic ic-waiting-task text-[3.6rem]"></i></span></div> 
          <div class="font-weight-bold">รออนุมัติ (On Behalf Of)</div>`,w(t,"class","mt-2 text-link text-center font-weight-bold text-size-xlarge mb-1"),w(u,"class","_box-item bg-link svelte-bb7no9"),w(r,"class","indicator-item _notification _verify svelte-bb7no9"),w(p,"class","_box-item bg-title svelte-bb7no9"),w(v,"class","indicator"),w(i,"class","flex justify-center gap-1.5 mb-3")},m(f,$){j(f,t,$),j(f,l,$),j(f,i,$),o(i,u),o(i,d),o(i,v),o(v,r),o(r,m),o(v,e),o(v,p),b||(D=[ie(u,"click",n[7]),ie(p,"click",n[8])],b=!0)},p(f,$){$&2&&re(m,f[1])},d(f){f&&T(t),f&&T(l),f&&T(i),b=!1,Ke(D)}}}function nt(n){let t,l,i,u,d,v,r,m,e,p,b,D,f,$,N,_,O,H,z,K,Z,P,B,Q,x,U,a,q,I,te,L,ne,ae,F,G,oe,J,ee;function Be(s){n[9](s)}let ue={placeholder:"Document No.",isHorizontal:!0};n[2].documentNo!==void 0&&(ue.value=n[2].documentNo),i=new je({props:ue}),R.push(()=>A(i,"value",Be));function Re(s){n[10](s)}let de={isHorizontal:!0,showAll:!0,labelClass:"text-gray-800 mr-2 self-center"};n[2].typeOfService!==void 0&&(de.value=n[2].typeOfService),r=new Qe({props:de}),R.push(()=>A(r,"value",Re));function He(s){n[11](s)}let pe={isHorizontal:!0,showAll:!0,labelClass:"text-gray-800 mr-2 self-center"};n[2].objective!==void 0&&(pe.value=n[2].objective),b=new Ue({props:pe}),R.push(()=>A(b,"value",He));function Ie(s){n[12](s)}let fe={label:"Job Title",labelClass:"text-gray-800 mr-3",isHorizontal:!0};n[2].jobTitle!==void 0&&(fe.value=n[2].jobTitle),N=new je({props:fe}),R.push(()=>A(N,"value",Ie));function Le(s){n[13](s)}let ce={labelClass:"text-gray-800 mr-3"};n[2].status!==void 0&&(ce.value=n[2].status),z=new Ve({props:ce}),R.push(()=>A(z,"value",Le));function Ae(s){n[14](s)}let me={label:"Created Date",labelClass:"text-gray-800 self-center mr-4",isHorizontal:!0,canClear:!0};n[2].createdDate!==void 0&&(me.value=n[2].createdDate),B=new le({props:me}),R.push(()=>A(B,"value",Ae));function Ee(s){n[15](s)}let ve={label:"Submitted Date",labelClass:"text-gray-800 self-center mr-2",isHorizontal:!0,canClear:!0};n[2].submittedDate!==void 0&&(ve.value=n[2].submittedDate),a=new le({props:ve}),R.push(()=>A(a,"value",Ee));function Fe(s){n[16](s)}let be={label:"Completed Date",labelClass:"text-gray-800 self-center mr-2",isHorizontal:!0,canClear:!0};return n[2].completedDate!==void 0&&(be.value=n[2].completedDate),L=new le({props:be}),R.push(()=>A(L,"value",Fe)),G=new Te({props:{search:!0,label:"Search",class:"text-size-large place-self-end mr-2 w-[96px]",icon:"ic-search"}}),G.$on("click",n[5]),J=new Te({props:{clear:!0,label:"Clear",class:"w-[96px]"}}),J.$on("click",n[6]),{c(){t=c("div"),l=c("div"),C(i.$$.fragment),d=g(),v=c("div"),C(r.$$.fragment),e=g(),p=c("div"),C(b.$$.fragment),f=g(),$=c("div"),C(N.$$.fragment),O=g(),H=c("div"),C(z.$$.fragment),Z=g(),P=c("div"),C(B.$$.fragment),x=g(),U=c("div"),C(a.$$.fragment),I=g(),te=c("div"),C(L.$$.fragment),ae=g(),F=c("div"),C(G.$$.fragment),oe=g(),C(J.$$.fragment),w(H,"class","desktop:col-span-2"),w(t,"class","grid desktop:grid-cols-3 grid-cols-1 desktop:gap-4 gap-2 mb-2 desktop:px-[18.6rem]"),w(F,"class","self-center text-center pb-2")},m(s,M){j(s,t,M),o(t,l),k(i,l,null),o(t,d),o(t,v),k(r,v,null),o(t,e),o(t,p),k(b,p,null),o(t,f),o(t,$),k(N,$,null),o(t,O),o(t,H),k(z,H,null),o(t,Z),o(t,P),k(B,P,null),o(t,x),o(t,U),k(a,U,null),o(t,I),o(t,te),k(L,te,null),j(s,ae,M),j(s,F,M),k(G,F,null),o(F,oe),k(J,F,null),ee=!0},p(s,M){const _e={};!u&&M&4&&(u=!0,_e.value=s[2].documentNo,E(()=>u=!1)),i.$set(_e);const ge={};!m&&M&4&&(m=!0,ge.value=s[2].typeOfService,E(()=>m=!1)),r.$set(ge);const $e={};!D&&M&4&&(D=!0,$e.value=s[2].objective,E(()=>D=!1)),b.$set($e);const we={};!_&&M&4&&(_=!0,we.value=s[2].jobTitle,E(()=>_=!1)),N.$set(we);const De={};!K&&M&4&&(K=!0,De.value=s[2].status,E(()=>K=!1)),z.$set(De);const Ce={};!Q&&M&4&&(Q=!0,Ce.value=s[2].createdDate,E(()=>Q=!1)),B.$set(Ce);const ke={};!q&&M&4&&(q=!0,ke.value=s[2].submittedDate,E(()=>q=!1)),a.$set(ke);const he={};!ne&&M&4&&(ne=!0,he.value=s[2].completedDate,E(()=>ne=!1)),L.$set(he)},i(s){ee||(h(i.$$.fragment,s),h(r.$$.fragment,s),h(b.$$.fragment,s),h(N.$$.fragment,s),h(z.$$.fragment,s),h(B.$$.fragment,s),h(a.$$.fragment,s),h(L.$$.fragment,s),h(G.$$.fragment,s),h(J.$$.fragment,s),ee=!0)},o(s){y(i.$$.fragment,s),y(r.$$.fragment,s),y(b.$$.fragment,s),y(N.$$.fragment,s),y(z.$$.fragment,s),y(B.$$.fragment,s),y(a.$$.fragment,s),y(L.$$.fragment,s),y(G.$$.fragment,s),y(J.$$.fragment,s),ee=!1},d(s){s&&T(t),S(i),S(r),S(b),S(N),S(z),S(B),S(a),S(L),s&&T(ae),s&&T(F),S(G),S(J)}}}function at(n){let t,l,i,u,d,v,r,m,e,p,b,D,f,$,N={tableConfig:n[4]};return f=new Xe({props:N}),n[17](f),{c(){t=c("div"),l=c("div"),i=c("span"),i.innerHTML='<i class="ic ic-manpower-service"></i>',u=g(),d=c("span"),d.textContent="Request Manpower Service Requisition",v=g(),r=c("span"),m=X("("),e=X(n[0]),p=X(")"),b=g(),D=c("div"),C(f.$$.fragment),w(i,"class","_icon-header svelte-bb7no9"),w(d,"class","text-size-large text-link"),w(r,"class","text-title text-size-large"),w(l,"class","text-center font-weight-bold desktop:col-start-2"),w(t,"class","desktop:grid desktop:grid-cols-3 mb-2")},m(_,O){j(_,t,O),o(t,l),o(l,i),o(l,u),o(l,d),o(l,v),o(l,r),o(r,m),o(r,e),o(r,p),j(_,b,O),j(_,D,O),k(f,D,null),$=!0},p(_,O){(!$||O&1)&&re(e,_[0]);const H={};f.$set(H)},i(_){$||(h(f.$$.fragment,_),$=!0)},o(_){y(f.$$.fragment,_),$=!1},d(_){_&&T(t),_&&T(b),_&&T(D),n[17](null),S(f)}}}function st(n){let t,l,i,u,d,v,r,m;return i=new Se({props:{$$slots:{default:[tt]},$$scope:{ctx:n}}}),d=new Pe({props:{title:"ค้นหารายการ",containerClass:"mb-3 bg-search px-2",titleClass:"text-link font-weight-bold  border-b-0 bg-search",$$slots:{default:[nt]},$$scope:{ctx:n}}}),r=new Se({props:{$$slots:{default:[at]},$$scope:{ctx:n}}}),{c(){t=c("div"),t.innerHTML=`<div class="_icon-text svelte-bb7no9"><div class="bg-title rounded-xl w-6 h-6"><span class="icon _icon-main svelte-bb7no9"><div class="m-1"><i class="ic ic-manpower-service"></i></div></span></div> 

      <div class="pl-2 font-weight-bold text-size-xlarge">Request Manpower Service Requisition</div></div>`,l=g(),C(i.$$.fragment),u=g(),C(d.$$.fragment),v=g(),C(r.$$.fragment),w(t,"class","bg-gray-100 border-gray-400 border p-2 rounded mb-2")},m(e,p){j(e,t,p),j(e,l,p),k(i,e,p),j(e,u,p),k(d,e,p),j(e,v,p),k(r,e,p),m=!0},p(e,p){const b={};p&16777218&&(b.$$scope={dirty:p,ctx:e}),i.$set(b);const D={};p&16777220&&(D.$$scope={dirty:p,ctx:e}),d.$set(D);const f={};p&16777225&&(f.$$scope={dirty:p,ctx:e}),r.$set(f)},i(e){m||(h(i.$$.fragment,e),h(d.$$.fragment,e),h(r.$$.fragment,e),m=!0)},o(e){y(i.$$.fragment,e),y(d.$$.fragment,e),y(r.$$.fragment,e),m=!1},d(e){e&&T(t),e&&T(l),S(i,e),e&&T(u),S(d,e),e&&T(v),S(r,e)}}}function lt(n){let t,l;return t=new Ge({props:{$$slots:{default:[st]},$$scope:{ctx:n}}}),{c(){C(t.$$.fragment)},m(i,u){k(t,i,u),l=!0},p(i,[u]){const d={};u&16777231&&(d.$$scope={dirty:u,ctx:i}),t.$set(d)},i(i){l||(h(t.$$.fragment,i),l=!0)},o(i){y(t.$$.fragment,i),l=!1},d(i){S(t,i)}}}function it(n,t,l){let i=0,u=0;const d=new Date().getFullYear()-2,v=new Date(d,0,1),r=Je.now().toJSDate(),m={documentNo:"",typeOfService:{key:"all",value:"All"},objective:{key:"all",value:"All"},jobTitle:"",status:{key:"all",value:"All"},createdDate:[v,r],submittedDate:void 0,completedDate:void 0};let e={...m};function p(){var a,q,I;return{documentNo:e.documentNo,jobTitle:e.jobTitle,status:(a=e.status)==null?void 0:a.key,section:"",typeOfService:(q=e.typeOfService)==null?void 0:q.key,objective:(I=e.objective)==null?void 0:I.key,startCreatedDate:e.createdDate?W(e.createdDate[0]):void 0,endCreatedDate:e.createdDate?W(e.createdDate[1],!0):void 0,startSubmittedDate:e.submittedDate?W(e.submittedDate[0]):void 0,endSubmittedDate:e.submittedDate?W(e.submittedDate[1],!0):void 0,startCompletedDate:e.completedDate?W(e.completedDate[0]):void 0,endCompletedDate:e.completedDate?W(e.completedDate[1],!0):void 0}}let b,D={columns:[{name:"Document No.",prop:"documentNo",Component:et,actions:{click:a=>{const q=()=>{se(Y.ManpowerDetail,{parent:Y.ManpowerList,manpowerId:a.recordId})};a.isNew?V.ChangeManpowerIsNew({manpowerId:a.recordId}).then(()=>{q()}):q()}}},{name:"Type of Service",prop:"typeOfService",render:a=>a.value??"-"},{name:"Objective",prop:"objective",render:a=>a.value??"-"},{name:"Job Title",prop:"jobTitle"},{name:"Current Status",prop:"status",render:a=>a.value??"-"},{name:"Created Date",prop:"createdDate",cellTemplate:Ne.Date},{name:"Submitted Date",prop:"submittedDate",cellTemplate:Ne.Date},{name:"Requester",prop:"requesterName"},{name:"On Behalf Of",prop:"onBehalfOfName"},{name:"Delete",prop:"_action",actions:{isEdit:!1,isDownload:!1,isDelete:a=>a.canDelete}}],getData:(a,q)=>Ye.all([V.GetManpowerTableCount({filter:{...p()}}).then(I=>(l(0,i=I),I)),V.GetManpowerTable({filter:{...p()},sortByParam:q,pageParam:a})]),deleteData(a){return V.DeleteManpower({manpowerId:a.recordId})},displayDeleteKey:"documentNo",isStriped:!1};function f(){b.reload(),O()}function $(){l(2,e={...m})}function N(){se(Y.ManpowerDetail,{parent:Y.ManpowerList})}function _(){se(Y.ManpowerOnBehalfList,{parent:Y.ManpowerList})}function O(){V.GetOnBehalfCount({filter:p()}).then(a=>{l(1,u=a)})}We(()=>{O()});function H(a){n.$$.not_equal(e.documentNo,a)&&(e.documentNo=a,l(2,e))}function z(a){n.$$.not_equal(e.typeOfService,a)&&(e.typeOfService=a,l(2,e))}function K(a){n.$$.not_equal(e.objective,a)&&(e.objective=a,l(2,e))}function Z(a){n.$$.not_equal(e.jobTitle,a)&&(e.jobTitle=a,l(2,e))}function P(a){n.$$.not_equal(e.status,a)&&(e.status=a,l(2,e))}function B(a){n.$$.not_equal(e.createdDate,a)&&(e.createdDate=a,l(2,e))}function Q(a){n.$$.not_equal(e.submittedDate,a)&&(e.submittedDate=a,l(2,e))}function x(a){n.$$.not_equal(e.completedDate,a)&&(e.completedDate=a,l(2,e))}function U(a){R[a?"unshift":"push"](()=>{b=a,l(3,b)})}return[i,u,e,b,D,f,$,N,_,H,z,K,Z,P,B,Q,x,U]}class rt extends Oe{constructor(t){super(),qe(this,t,it,lt,ze,{})}}new rt({target:document.getElementById("app")});
