import{S as Ve,i as We,s as Qe,M as Xe,w as C,x as B,t as b,b as y,y as S,D as Ce,z as Ye,B as R,F as j,o as h,h as $,m as ae,j as g,a as H,p as f,q as He,G as J,g as Oe,c as Me,d as O,A as Ze,R as Be,C as et,e as tt,r as at,aR as Se,aS as Fe,aT as Ne,aU as Ae,K as nt,a3 as st,aV as Te}from"./MainLayout.js";import{E as xe}from"./ESS_FixAndGeneral.service.js";import{t as Y}from"./formatter.js";import{C as ot}from"./Collapse.js";import{B as te}from"./BaseInput.js";import{C as it}from"./CheckBox.js";import{D as se}from"./DateRange.js";import{B as Le}from"./Button.js";import{F as lt,a as rt}from"./FixListSortByDropdown.js";import{P as ut}from"./PageTitle.js";import{F as pt}from"./FixAndGeneralStatusDropdown.js";import"./Label.js";import"./flatpickr.js";import"./_commonjsHelpers.js";import"./Dropdown.js";function Ge(t,e,i){const r=t.slice();return r[23]=e[i],r}function ft(t){let e;return{c(){e=$("div"),e.innerHTML=`<span class="icon is-medium text-fix-search-icon"><i class="ic ic-transportation-repair"></i></span> 
                <span>งานแจ้งซ่อมยานพาหนะ</span>`,g(e,"slot","label"),g(e,"class","flex items-center gap-1")},m(i,r){H(i,e,r)},p:st,d(i){i&&O(e)}}}function ct(t){let e,i,r,l,_,p,u,s,a,v,c,D,x,w,G,M,L,E,W,q,N,A,T,K,I,o,P,Z,m,d,F,z,X,ne,Q,U,oe,V,ee;function Ee(n){t[9](n)}let ie={placeholder:"Document No."};t[3].documentNo!==void 0&&(ie.value=t[3].documentNo),r=new te({props:ie}),R.push(()=>j(r,"value",Ee));function Ie(n){t[10](n)}let le={isHorizontal:!0,placeholder:"",label:"Current Status",labelClass:"w-[89px]"};t[3].status!==void 0&&(le.value=t[3].status),s=new pt({props:le}),R.push(()=>j(s,"value",Ie));function Pe(n){t[11](n)}let re={isHorizontal:!0,label:"Employee name"};t[3].employeeName!==void 0&&(re.value=t[3].employeeName),c=new te({props:re}),R.push(()=>j(c,"value",Pe));function Re(n){t[12](n)}let ue={isHorizontal:!0,label:"Topic"};t[3].topic!==void 0&&(ue.value=t[3].topic),w=new te({props:ue}),R.push(()=>j(w,"value",Re)),N=new it({props:{isForm:!0,labelMultipleLines:!0,checked:!0,disabled:!0,$$slots:{label:[ft]},$$scope:{ctx:t}}});function je(n){t[13](n)}let pe={isHorizontal:!0,label:"Created Date"};t[3].createdDate!==void 0&&(pe.value=t[3].createdDate),T=new se({props:pe}),R.push(()=>j(T,"value",je));function Je(n){t[14](n)}let fe={isHorizontal:!0,label:"Accepted Date"};t[3].acceptedDate!==void 0&&(fe.value=t[3].acceptedDate),o=new se({props:fe}),R.push(()=>j(o,"value",Je));function Ke(n){t[15](n)}let ce={isHorizontal:!0,label:"Completed Date"};t[3].completedDate!==void 0&&(ce.value=t[3].completedDate),m=new se({props:ce}),R.push(()=>j(m,"value",Ke));function Ue(n){t[16](n)}let de={isHorizontal:!0,label:"Accepted By"};return t[3].acceptedBy!==void 0&&(de.value=t[3].acceptedBy),z=new te({props:de}),R.push(()=>j(z,"value",Ue)),U=new Le({props:{icon:"ic-search",label:"Search",class:"w-[96px]",isLoading:t[2]}}),U.$on("click",t[5]),V=new Le({props:{primary:!1,outline:!0,label:"Clear",class:"w-[96px]",isLoading:t[2]}}),V.$on("click",t[6]),{c(){e=$("div"),i=$("div"),C(r.$$.fragment),_=h(),p=$("div"),p.innerHTML='<span class="icon text-primary"><i class="ic ic-search"></i></span>',u=h(),C(s.$$.fragment),v=h(),C(c.$$.fragment),x=h(),C(w.$$.fragment),M=h(),L=$("div"),E=$("div"),E.textContent="Type of Work",W=h(),q=$("div"),C(N.$$.fragment),A=h(),C(T.$$.fragment),I=h(),C(o.$$.fragment),Z=h(),C(m.$$.fragment),F=h(),C(z.$$.fragment),ne=h(),Q=$("div"),C(U.$$.fragment),oe=h(),C(V.$$.fragment),g(p,"class","absolute inset-y-0 right-2 flex items-center pointer-events-none"),g(i,"class","relative"),g(E,"class","w-[100px]"),g(q,"class","bg-gray-300 rounded-lg border border-gray-400 px-2 py-1"),g(L,"class","flex items-center desktop:col-span-2"),g(e,"class","grid gap-y-2 mb-4 desktop:grid-cols-3 desktop:gap-y-3 desktop:gap-x-8 desktop:px-[100px]"),g(Q,"class","flex gap-2 justify-center")},m(n,k){H(n,e,k),f(e,i),B(r,i,null),f(i,_),f(i,p),f(e,u),B(s,e,null),f(e,v),B(c,e,null),f(e,x),B(w,e,null),f(e,M),f(e,L),f(L,E),f(L,W),f(L,q),B(N,q,null),f(e,A),B(T,e,null),f(e,I),B(o,e,null),f(e,Z),B(m,e,null),f(e,F),B(z,e,null),H(n,ne,k),H(n,Q,k),B(U,Q,null),f(Q,oe),B(V,Q,null),ee=!0},p(n,k){const me={};!l&&k&8&&(l=!0,me.value=n[3].documentNo,J(()=>l=!1)),r.$set(me);const ge={};!a&&k&8&&(a=!0,ge.value=n[3].status,J(()=>a=!1)),s.$set(ge);const _e={};!D&&k&8&&(D=!0,_e.value=n[3].employeeName,J(()=>D=!1)),c.$set(_e);const $e={};!G&&k&8&&(G=!0,$e.value=n[3].topic,J(()=>G=!1)),w.$set($e);const be={};k&67108864&&(be.$$scope={dirty:k,ctx:n}),N.$set(be);const ve={};!K&&k&8&&(K=!0,ve.value=n[3].createdDate,J(()=>K=!1)),T.$set(ve);const he={};!P&&k&8&&(P=!0,he.value=n[3].acceptedDate,J(()=>P=!1)),o.$set(he);const ye={};!d&&k&8&&(d=!0,ye.value=n[3].completedDate,J(()=>d=!1)),m.$set(ye);const De={};!X&&k&8&&(X=!0,De.value=n[3].acceptedBy,J(()=>X=!1)),z.$set(De);const we={};k&4&&(we.isLoading=n[2]),U.$set(we);const ke={};k&4&&(ke.isLoading=n[2]),V.$set(ke)},i(n){ee||(b(r.$$.fragment,n),b(s.$$.fragment,n),b(c.$$.fragment,n),b(w.$$.fragment,n),b(N.$$.fragment,n),b(T.$$.fragment,n),b(o.$$.fragment,n),b(m.$$.fragment,n),b(z.$$.fragment,n),b(U.$$.fragment,n),b(V.$$.fragment,n),ee=!0)},o(n){y(r.$$.fragment,n),y(s.$$.fragment,n),y(c.$$.fragment,n),y(w.$$.fragment,n),y(N.$$.fragment,n),y(T.$$.fragment,n),y(o.$$.fragment,n),y(m.$$.fragment,n),y(z.$$.fragment,n),y(U.$$.fragment,n),y(V.$$.fragment,n),ee=!1},d(n){n&&O(e),S(r),S(s),S(c),S(w),S(N),S(T),S(o),S(m),S(z),n&&O(ne),n&&O(Q),S(U),S(V)}}}function qe(t){let e,i,r=t[1],l=[];for(let p=0;p<r.length;p+=1)l[p]=ze(Ge(t,r,p));const _=p=>y(l[p],1,1,()=>{l[p]=null});return{c(){for(let p=0;p<l.length;p+=1)l[p].c();e=tt()},m(p,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(p,u);H(p,e,u),i=!0},p(p,u){if(u&130){r=p[1];let s;for(s=0;s<r.length;s+=1){const a=Ge(p,r,s);l[s]?(l[s].p(a,u),b(l[s],1)):(l[s]=ze(a),l[s].c(),b(l[s],1),l[s].m(e.parentNode,e))}for(Oe(),s=r.length;s<l.length;s+=1)_(s);Me()}},i(p){if(!i){for(let u=0;u<r.length;u+=1)b(l[u]);i=!0}},o(p){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)y(l[u]);i=!1},d(p){at(l,p),p&&O(e)}}}function dt(t){let e,i,r,l,_,p,u,s=(t[23].topic??"-")+"",a,v;return{c(){var c;e=$("div"),i=$("div"),r=$("span"),l=$("i"),p=h(),u=$("div"),a=ae(s),v=h(),g(l,"class",_="ic "+Te[(c=t[23].typeOfService)==null?void 0:c.key]),g(r,"class","icon text-fix-general-icon"),g(i,"class","text-size-xxlarge mr-2"),g(u,"class","text-size-large font-weight-bold text-primary"),g(e,"class","flex items-center")},m(c,D){H(c,e,D),f(e,i),f(i,r),f(r,l),f(e,p),f(e,u),f(u,a),H(c,v,D)},p(c,D){var x;D&2&&_!==(_="ic "+Te[(x=c[23].typeOfService)==null?void 0:x.key])&&g(l,"class",_),D&2&&s!==(s=(c[23].topic??"-")+"")&&He(a,s)},d(c){c&&O(e),c&&O(v)}}}function ze(t){var r,l,_,p;let e,i;return e=new rt({props:{borderColor:Se[(r=t[23].status)==null?void 0:r.key],icon:Fe[(l=t[23].status)==null?void 0:l.key],iconColor:Ne[(_=t[23].status)==null?void 0:_.key],statusText:Ae[(p=t[23].status)==null?void 0:p.key],cardDetail:t[23],selectable:!1,$$slots:{default:[dt]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){C(e.$$.fragment)},m(u,s){B(e,u,s),i=!0},p(u,s){var v,c,D,x;const a={};s&2&&(a.borderColor=Se[(v=u[23].status)==null?void 0:v.key]),s&2&&(a.icon=Fe[(c=u[23].status)==null?void 0:c.key]),s&2&&(a.iconColor=Ne[(D=u[23].status)==null?void 0:D.key]),s&2&&(a.statusText=Ae[(x=u[23].status)==null?void 0:x.key]),s&2&&(a.cardDetail=u[23]),s&67108866&&(a.$$scope={dirty:s,ctx:u}),e.$set(a)},i(u){i||(b(e.$$.fragment,u),i=!0)},o(u){y(e.$$.fragment,u),i=!1},d(u){S(e,u)}}}function mt(t){let e,i,r,l,_,p,u,s,a,v,c,D,x,w,G,M=(t[0]||0)+"",L,E,W,q,N,A,T,K,I,o;e=new ut({props:{icon:"ic-fix",iconBg:"bg-fix",title:"Transportation Service",isRoundBottom:!1}}),l=new ot({props:{title:"ค้นหารายการแจ้งซ่อมยานพาหนะ",containerClass:"border-0",titleClass:"text-left text-link",$$slots:{default:[ct]},$$scope:{ctx:t}}});function P(d){t[17](d)}let Z={isAdmin:!0};t[4].sortBy!==void 0&&(Z.value=t[4].sortBy),A=new lt({props:Z}),R.push(()=>j(A,"value",P)),A.$on("change",t[18]);let m=t[1]&&qe(t);return{c(){C(e.$$.fragment),i=h(),r=$("div"),C(l.$$.fragment),_=h(),p=$("div"),u=$("div"),s=$("div"),a=$("span"),a.innerHTML='<span class="icon text-fix-secondary"><i class="ic ic-fix"></i></span>',v=h(),c=$("span"),D=$("span"),D.textContent="รายการแจ้งซ่อมยานพาหนะ",x=h(),w=$("span"),G=ae("("),L=ae(M),E=ae(")"),W=h(),q=$("div"),N=$("div"),C(A.$$.fragment),K=h(),I=$("div"),m&&m.c(),g(r,"class","p-2 bg-white border border-gray-400 mb-1 desktop:p-3"),g(a,"class","text-[24px] mr-1"),g(w,"class","text-fix-secondary"),g(c,"class","text-size-xlarge font-weight-bold text-fix-tertiary"),g(s,"class","flex items-center justify-center desktop:col-start-2"),g(N,"class","w-[273px]"),g(q,"class","flex justify-end"),g(u,"class","grid gap-2 mb-2 desktop:grid-cols-3"),g(I,"class","grid gap-2 desktop:grid-cols-3"),g(p,"class","bg-gray-100 border border-gray-400 p-2 desktop:px-4 desktop:pb-3")},m(d,F){B(e,d,F),H(d,i,F),H(d,r,F),B(l,r,null),H(d,_,F),H(d,p,F),f(p,u),f(u,s),f(s,a),f(s,v),f(s,c),f(c,D),f(c,x),f(c,w),f(w,G),f(w,L),f(w,E),f(u,W),f(u,q),f(q,N),B(A,N,null),f(p,K),f(p,I),m&&m.m(I,null),o=!0},p(d,F){const z={};F&67108876&&(z.$$scope={dirty:F,ctx:d}),l.$set(z),(!o||F&1)&&M!==(M=(d[0]||0)+"")&&He(L,M);const X={};!T&&F&16&&(T=!0,X.value=d[4].sortBy,J(()=>T=!1)),A.$set(X),d[1]?m?(m.p(d,F),F&2&&b(m,1)):(m=qe(d),m.c(),b(m,1),m.m(I,null)):m&&(Oe(),y(m,1,1,()=>{m=null}),Me())},i(d){o||(b(e.$$.fragment,d),b(l.$$.fragment,d),b(A.$$.fragment,d),b(m),o=!0)},o(d){y(e.$$.fragment,d),y(l.$$.fragment,d),y(A.$$.fragment,d),y(m),o=!1},d(d){S(e,d),d&&O(i),d&&O(r),S(l),d&&O(_),d&&O(p),S(A),m&&m.d()}}}function gt(t){let e,i;return e=new Xe({props:{isShowLoading:t[2],$$slots:{default:[mt]},$$scope:{ctx:t}}}),{c(){C(e.$$.fragment)},m(r,l){B(e,r,l),i=!0},p(r,[l]){const _={};l&4&&(_.isShowLoading=r[2]),l&67108895&&(_.$$scope={dirty:l,ctx:r}),e.$set(_)},i(r){i||(b(e.$$.fragment,r),i=!0)},o(r){y(e.$$.fragment,r),i=!1},d(r){S(e,r)}}}let _t=null;function $t(t,e,i){let r,l,_=!1;const p=Ce.now().startOf("month").toJSDate(),u=Ce.now().endOf("day").toJSDate(),s={documentNo:"",status:null,employeeName:"",topic:"",createdDate:[p,u],acceptedDate:[p,u],completedDate:[p,u],acceptedBy:""};let a={...s},v={sortBy:void 0,ascending:!1};function c(){var o;return{documentNo:a.documentNo.trim(),status:((o=a.status)==null?void 0:o.key)??"all",employeeName:a.employeeName.trim(),topic:a.topic.trim(),typeOfServices:nt.FixTypeOfService.Transportation,startCreatedDate:Y(a.createdDate[0]),endCreatedDate:Y(a.createdDate[1],!0),startCompletedDate:Y(a.completedDate[0]),endCompletedDate:Y(a.completedDate[1],!0),startAcceptedDate:Y(a.acceptedDate[0]),endAcceptedDate:Y(a.acceptedDate[1],!0),pmsvEmployeeName:a.acceptedBy.trim()}}function D(){console.log("filter",c()),G()}function x(){i(3,a={...s})}function w({detail:o}){Ze(Be.FixGeneralDetail,{parent:Be.TransportationList,recordId:o.recordId})}function G(){i(2,_=!0);const o=c();et.all([xe.GetFixAndGeneralForAdminListCount({filter:o}),xe.GetFixAndGeneralForAdminList({filter:o,sortByParam:v,pageParam:_t})]).then(P=>{i(2,_=!1),i(0,r=P[0]),P[1]&&i(1,l=P[1])})}Ye(()=>{G()});function M(o){t.$$.not_equal(a.documentNo,o)&&(a.documentNo=o,i(3,a))}function L(o){t.$$.not_equal(a.status,o)&&(a.status=o,i(3,a))}function E(o){t.$$.not_equal(a.employeeName,o)&&(a.employeeName=o,i(3,a))}function W(o){t.$$.not_equal(a.topic,o)&&(a.topic=o,i(3,a))}function q(o){t.$$.not_equal(a.createdDate,o)&&(a.createdDate=o,i(3,a))}function N(o){t.$$.not_equal(a.acceptedDate,o)&&(a.acceptedDate=o,i(3,a))}function A(o){t.$$.not_equal(a.completedDate,o)&&(a.completedDate=o,i(3,a))}function T(o){t.$$.not_equal(a.acceptedBy,o)&&(a.acceptedBy=o,i(3,a))}function K(o){t.$$.not_equal(v.sortBy,o)&&(v.sortBy=o,i(4,v))}return[r,l,_,a,v,D,x,w,G,M,L,E,W,q,N,A,T,K,({detail:o})=>{i(4,v.sortBy=o==null?void 0:o.id,v),G()}]}class bt extends Ve{constructor(e){super(),We(this,e,$t,gt,Qe,{})}}new bt({target:document.getElementById("app")});
