import{S as ie,i as pe,s as de,M as me,w as L,x as E,t as z,b as D,y as N,C as ce,B as ne,F as fe,h as u,o as C,m as O,j as b,a as ae,p as l,q as oe,G as ue,d as le,L as be}from"./MainLayout.js";import{E as S}from"./ESS_Probationary.service.js";import{B as G}from"./Button.js";import{C as F,r as ee,T as ge}from"./Table.js";import{E as te}from"./EmployeeDropdownWrapper.js";import"./formatter.js";import"./html.js";import"./_commonjsHelpers.js";import"./BaseInput.js";import"./Label.js";import"./EmployeeDropdown.js";import"./Dropdown.js";function se(a){let o,s,i;return{c(){o=u("div"),s=O("Selected : "),i=O(a[4]),b(o,"class","mr-2")},m(r,d){ae(r,o,d),l(o,s),l(o,i)},p(r,d){d&16&&oe(i,r[4])},d(r){r&&le(o)}}}function he(a){let o,s,i,r,d,m,c,y,I,P,M,q,x,T,g,e,t,p,w,J,k,H,V,v,W,$,K,B,_,U,j,f=a[4]>0&&se(a);g=new G({props:{secondary:!0,class:"w-[204px] font-weight-normal",label:"Submit",isLoading:a[1],disabled:!a[4]}}),g.$on("click",a[6]),H=new G({props:{clear:!0,label:"Export",class:"font-weight-normal text-size-large mr-4 w-[96px]",icon:"ic-excel text-excel",isLoading:a[1]}}),H.$on("click",a[7]),v=new G({props:{outline:!0,primary:!1,label:"Cancel",class:"font-weight-normal text-size-large mr-2 w-[96px]",isLoading:a[1]}}),v.$on("click",a[8]),$=new G({props:{label:"Save",class:"font-weight-normal text-size-large w-[96px]",isLoading:a[1]}}),$.$on("click",a[9]);function re(n){a[11](n)}let Q={tableConfig:a[5]};return a[0]!==void 0&&(Q.selected=a[0]),_=new ge({props:Q}),a[10](_),ne.push(()=>fe(_,"selected",re)),{c(){o=u("div"),s=u("div"),i=u("div"),i.innerHTML=`<span class="icon svelte-16qhc3w"><i class="ic ic-days-square"></i></span> 
        <span class="font-weight-bold text-size-xlarge leading-tight">Employee 180 days Probationary Period</span>`,r=C(),d=u("div"),m=u("div"),c=u("span"),c.textContent="จำนวนพนักงาน :",y=C(),I=u("span"),P=O(a[2]),M=O(" คน"),q=C(),x=u("div"),f&&f.c(),T=C(),L(g.$$.fragment),e=C(),t=u("div"),p=u("div"),w=u("div"),w.textContent="Employee Probation List",J=C(),k=u("div"),L(H.$$.fragment),V=C(),L(v.$$.fragment),W=C(),L($.$$.fragment),K=C(),B=u("div"),L(_.$$.fragment),b(i,"class","icon-text flex mb-2"),b(c,"class","text-gray-900 mr-1"),b(I,"class","font-weight-bold"),b(m,"class","mb-3 desktop:mb-0 desktop:flex desktop:items-center desktop:pl-7"),b(x,"class","flex flex-1 items-center justify-end"),b(d,"class","desktop:flex"),b(s,"class","bg-gray-100 p-2"),b(w,"class","font-weight-bold text-size-xlarge mb-3 desktop:mb-0"),b(k,"class","flex justify-between"),b(p,"class","mb-3 desktop:flex desktop:items-center desktop:justify-between"),b(B,"class","overflow-x-auto relative"),b(t,"class","bg-white border-t p-2 desktop:py-3 desktop:px-4"),b(o,"class","border border-gray-400 rounded-md overflow-hidden")},m(n,h){ae(n,o,h),l(o,s),l(s,i),l(s,r),l(s,d),l(d,m),l(m,c),l(m,y),l(m,I),l(I,P),l(I,M),l(d,q),l(d,x),f&&f.m(x,null),l(x,T),E(g,x,null),l(o,e),l(o,t),l(t,p),l(p,w),l(p,J),l(p,k),E(H,k,null),l(k,V),E(v,k,null),l(k,W),E($,k,null),l(t,K),l(t,B),E(_,B,null),j=!0},p(n,h){(!j||h&4)&&oe(P,n[2]),n[4]>0?f?f.p(n,h):(f=se(n),f.c(),f.m(x,T)):f&&(f.d(1),f=null);const A={};h&2&&(A.isLoading=n[1]),h&16&&(A.disabled=!n[4]),g.$set(A);const R={};h&2&&(R.isLoading=n[1]),H.$set(R);const X={};h&2&&(X.isLoading=n[1]),v.$set(X);const Y={};h&2&&(Y.isLoading=n[1]),$.$set(Y);const Z={};!U&&h&1&&(U=!0,Z.selected=n[0],ue(()=>U=!1)),_.$set(Z)},i(n){j||(z(g.$$.fragment,n),z(H.$$.fragment,n),z(v.$$.fragment,n),z($.$$.fragment,n),z(_.$$.fragment,n),j=!0)},o(n){D(g.$$.fragment,n),D(H.$$.fragment,n),D(v.$$.fragment,n),D($.$$.fragment,n),D(_.$$.fragment,n),j=!1},d(n){n&&le(o),f&&f.d(),N(g),N(H),N(v),N($),a[10](null),N(_)}}}function ye(a){let o,s;return o=new me({props:{$$slots:{default:[he]},$$scope:{ctx:a}}}),{c(){L(o.$$.fragment)},m(i,r){E(o,i,r),s=!0},p(i,[r]){const d={};r&8223&&(d.$$scope={dirty:r,ctx:i}),o.$set(d)},i(i){s||(z(o.$$.fragment,i),s=!0)},o(i){D(o.$$.fragment,i),s=!1},d(i){N(o,i)}}}function xe(a,o,s){let i,r=!1,d=0,m=[],c={},y,I={columns:[{name:"Date Stamp",prop:"dateStamp",cellTemplate:F.Date,headerClasses:"!sticky text-center left-[37px] z-[2]",cellClasses:"sticky left-[37px] z-[1]",width:"120px"},{name:"Employee ID",prop:"employeeId",headerClasses:"!sticky text-center left-[157px] z-[2]",cellClasses:"sticky left-[157px] z-[1]",width:"120px"},{name:"Employee Name",prop:"employeeNameEN",headerClasses:"!sticky text-center left-[277px] z-[2]",cellClasses:"sticky left-[277px] z-[1]",width:"250px"},{name:"Level",prop:"level",headerClasses:"text-center",width:"100px"},{name:"Date Joined Company",prop:"dateJoinedCompany",cellTemplate:F.Date,headerClasses:"text-center",width:"100px"},{name:"Date Completed Probation",prop:"dateCompletedProbation",cellTemplate:F.Date,headerClasses:"text-center",width:"126px"},{name:"Immediate Line/Section Head",prop:"sectionHead",headerClasses:"text-center z-[1]",width:"240px",ComponentNew:({row:e})=>ee(te,{displayValue:e.sectionHead?{userId:e.sectionHead??"",employeeName:e.sectionHeadName??""}:void 0,service:S.SearchUsers,change:({detail:t})=>{const p=m.findIndex(w=>w.employeeId===e.employeeId);p>-1&&(m[p]={...m[p],sectionHead:(t==null?void 0:t.userId)??"",sectionHeadName:(t==null?void 0:t.employeeName)??"",sectionHeadTH:(t==null?void 0:t.employeeNameTH)??"",sectionHeadPosition:(t==null?void 0:t.position)??""})},disabled:e.isDisable||e.isDisableSectionHead,excludeIds:[e.employeeId,e.departmentHead].filter(t=>!!t).join(",")})},{name:"Department Head",prop:"departmentHead",headerClasses:"text-center z-[1]",width:"240px",ComponentNew:({row:e})=>ee(te,{displayValue:e.departmentHead?{userId:e.departmentHead??"",employeeName:e.departmentHeadName??""}:void 0,service:S.SearchUsers,change:({detail:t})=>{const p=m.findIndex(w=>w.employeeId===e.employeeId);p>-1&&(m[p]={...m[p],departmentHead:t.userId,departmentHeadName:t.employeeName,departmentHeadTH:t.employeeNameTH,departmentHeadPosition:t.position})},disabled:e.isDisable,excludeIds:[e.employeeId,e.sectionHead].filter(t=>!!t).join(","),clearable:!1})},{name:"CEP",prop:"cep",headerClasses:"text-center",width:"108px"},{name:"Function",prop:"function",headerClasses:"text-center",width:"90px"},{name:"Department",prop:"department",headerClasses:"text-center",width:"100px"},{name:"Section",prop:"section",headerClasses:"text-center",width:"84px"},{name:"Unit",prop:"unit",headerClasses:"text-center",width:"150px"}],getData:(e,t)=>ce.all([S.GetProbationaryListsCount().then(p=>(s(2,d=p),p)),S.GetProbationaryLists({sortByParam:t,pageParam:e}).then(p=>(m=p,p))]),isStriped:!1,selectable:!0,selectCellClass:"sticky left-[0px] z-[1]",freezeHeader:!0,canSelect:e=>e.isDisable===!1,rowIdentity:"employeeId"};function P(){s(1,r=!0),S.MassSubmitProbationary({probations:Object.values(c)}).then(()=>{s(0,c={}),s(1,r=!1),y.reload()}).catch(()=>{s(1,r=!1)})}function M(){s(1,r=!0),S.ExportExcel().then(e=>{s(1,r=!1),window.open(e,"_blank")}).catch(()=>{s(1,r=!1)})}function q(){s(0,c={}),y.reload()}function x(){const e=m.filter(t=>Object.keys(c).includes(t.employeeId));e.length?(s(1,r=!0),S.MassSaveProbationary({probations:e}).then(()=>{s(0,c={}),s(1,r=!1),y.reload()}).catch(()=>{s(1,r=!1)})):be.error("โปรดเลือกรายการเพื่อบันทึก")}function T(e){ne[e?"unshift":"push"](()=>{y=e,s(3,y)})}function g(e){c=e,s(0,c)}return a.$$.update=()=>{a.$$.dirty&1&&s(4,i=Object.keys(c).length)},[c,r,d,y,i,I,P,M,q,x,T,g]}class _e extends ie{constructor(o){super(),pe(this,o,xe,ye,de,{})}}new _e({target:document.getElementById("app")});
