import{L as gt,S as Ut,i as Vt,s as Ot,M as Jt,w as Y,x as G,t as g,b as $,y as U,ac as At,R as Kt,z as Qt,K as me,aC as Xt,o as u,h as r,m as y,j as p,a6 as Lt,a as E,p as t,ab as Zt,q as N,g as Ye,c as Ge,d as M,af as Tt,at as xt,az as en,aD as jt,A as Et,B as He,e as tn,r as nn,a3 as Ue,F as qt,G as Yt}from"./MainLayout.js";import{E as qe}from"./ESS_Retirement.service.js";import{b as Mt,f as le}from"./formatter.js";import{B as De}from"./Button.js";import{C as sn}from"./Card.js";import{R as ln}from"./Radio.js";import{M as _t}from"./Modal.js";import{A as an}from"./ApprovalHistoryModal.js";import{T as on}from"./TextArea.js";import{c as rn}from"./array.js";import{r as pn}from"./sharedValidate.js";import"./Label.js";import"./Table.js";import"./html.js";import"./_commonjsHelpers.js";const fn=l=>{const e={isValid:!0,errorPath:void 0,inner:[]},n=rn({rejectComment:pn.label("กรอกความคิดเห็น")});try{n.validateSync(l,{abortEarly:!1})}catch(s){console.log("error",JSON.stringify(s)),Object.keys(s).length&&(console.log("path",s.inner[0].path),console.log("errors",s.errors[0]),e.isValid=!1,e.errorPath=(s.inner[0].path??"").split(/\.|\[/),e.inner=s.inner,gt.error(s.errors[0]))}return e};function Pt(l,e,n){const s=l.slice();return s[34]=e[n],s}function Ft(l){let e;return{c(){e=r("div"),e.textContent="Generating PDF ...",p(e,"class","_g-pdf-generating")},m(n,s){E(n,e,s)},d(n){n&&M(e)}}}function Nt(l){let e,n,s,f;return e=new De({props:{isLoading:l[1],outline:!0,class:"mr-2 w-[96px]",label:"Cancel"}}),e.$on("click",l[11]),s=new De({props:{isLoading:l[1],class:"w-[96px]",secondary:!0,label:"Submit"}}),s.$on("click",l[12]),{c(){Y(e.$$.fragment),n=u(),Y(s.$$.fragment)},m(a,o){G(e,a,o),E(a,n,o),G(s,a,o),f=!0},p(a,o){const c={};o[0]&2&&(c.isLoading=a[1]),e.$set(c);const m={};o[0]&2&&(m.isLoading=a[1]),s.$set(m)},i(a){f||(g(e.$$.fragment,a),g(s.$$.fragment,a),f=!0)},o(a){$(e.$$.fragment,a),$(s.$$.fragment,a),f=!1},d(a){U(e,a),a&&M(n),U(s,a)}}}function It(l){let e,n,s=(l[2].canApprove||l[2].canReject)&&zt(l);return{c(){s&&s.c(),e=tn()},m(f,a){s&&s.m(f,a),E(f,e,a),n=!0},p(f,a){f[2].canApprove||f[2].canReject?s?(s.p(f,a),a[0]&4&&g(s,1)):(s=zt(f),s.c(),g(s,1),s.m(e.parentNode,e)):s&&(Ye(),$(s,1,1,()=>{s=null}),Ge())},i(f){n||(g(s),n=!0)},o(f){$(s),n=!1},d(f){s&&s.d(f),f&&M(e)}}}function zt(l){let e,n,s,f;return e=new De({props:{isLoading:l[1],secondary:!0,class:"w-[96px]",label:"Approve",disabled:!l[2].canApprove}}),e.$on("click",l[14]),s=new De({props:{isLoading:l[1],secondary3:!0,class:"w-[96px]",label:"Reject",disabled:!l[2].canReject}}),s.$on("click",l[18]),{c(){Y(e.$$.fragment),n=u(),Y(s.$$.fragment)},m(a,o){G(e,a,o),E(a,n,o),G(s,a,o),f=!0},p(a,o){const c={};o[0]&2&&(c.isLoading=a[1]),o[0]&4&&(c.disabled=!a[2].canApprove),e.$set(c);const m={};o[0]&2&&(m.isLoading=a[1]),o[0]&4&&(m.disabled=!a[2].canReject),s.$set(m)},i(a){f||(g(e.$$.fragment,a),g(s.$$.fragment,a),f=!0)},o(a){$(e.$$.fragment,a),$(s.$$.fragment,a),f=!1},d(a){U(e,a),a&&M(n),U(s,a)}}}function Wt(l){let e,n;return e=new De({props:{isLoading:l[1],outline:!0,icon:"ic-pdf text-pdf",label:"Upload to Personnel Folder"}}),e.$on("click",l[16]),{c(){Y(e.$$.fragment)},m(s,f){G(e,s,f),n=!0},p(s,f){const a={};f[0]&2&&(a.isLoading=s[1]),e.$set(a)},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Bt(l){let e,n,s;function f(o){l[20](o)}let a={isForm:!0,isEnumValue:!0,value:l[34].key,label:l[34].value,name:"retirementChoice",disabled:!l[2].canEdit};return l[2].retirementChoice!==void 0&&(a.group=l[2].retirementChoice),e=new ln({props:a}),He.push(()=>qt(e,"group",f)),{c(){Y(e.$$.fragment)},m(o,c){G(e,o,c),s=!0},p(o,c){const m={};c[0]&1&&(m.value=o[34].key),c[0]&1&&(m.label=o[34].value),c[0]&4&&(m.disabled=!o[2].canEdit),!n&&c[0]&4&&(n=!0,m.group=o[2].retirementChoice,Yt(()=>n=!1)),e.$set(m)},i(o){s||(g(e.$$.fragment,o),s=!0)},o(o){$(e.$$.fragment,o),s=!1},d(o){U(e,o)}}}function cn(l){let e,n,s,f,a,o=Mt(l[2].createdDate)+"",c,m,z,h,A,W,K,B,V=l[2].employeeNameTH+"",x,ae,P,te,_e,Q,ee,oe,I,ne,re,ie,pe,j,O,X,se=(l[2].sectionHeadPositionTH??"")+"",J,de,q=l[2].sectionHeadPositionTH?"และ":"",d,L,F=(l[2].departmentHeadPositionTH??"")+"",Z,ge,w,H,k=l[2].employeeTitle+"",S,Re=l[2].employeeNameTH+"",Fe,Ve,Oe,ve,Ne,D,fe,be,Ie,$e,i=l[2].employeeNameEN+"",v,ze,ce,he,Ae,ye,ke=le(l[2].submittedDate)+"",Le,We,ue,Se,Be,Ce,Je=l[2].sectionHead+"",ft,bt,Te,Ke,$t,Qe,Xe=le(l[2].sectionHeadApproveDate)+"",ct,ht,je,Ze,yt,xe,et=l[2].departmentHead+"",ut,kt,Ee,tt,St,nt,st=le(l[2].departmentHeadApproveDate)+"",mt,Ct,Me,lt,wt,at,ot=le(l[2].completedDate)+"",dt,Ht,Pe,rt,Dt,it,pt=le(l[2].retirementDate)+"",vt,T,we=l[0],C=[];for(let _=0;_<we.length;_+=1)C[_]=Bt(Pt(l,we,_));const Gt=_=>$(C[_],1,1,()=>{C[_]=null});return{c(){e=r("div"),n=r("div"),n.textContent="ลับเฉพาะ",s=u(),f=r("div"),a=y("วันที่ "),c=y(o),m=u(),z=r("div"),z.textContent="เรื่อง เลือกวันที่เกษียณอายุ",h=u(),A=r("div"),W=y("เรียน "),K=r("span"),B=y("คุณ"),x=y(V),ae=u(),P=r("div"),te=r("p"),te.textContent=`ตามนโยบายและระเบียบวิธีปฏิบัติด้านการบุคคลหมวด 12 ข้อ 12.2
                ให้สิทธิพนักงานสามารถเลือกกําหนดวัน พ้นสภาพจากการ
                เป็นพนักงานของบริษัทฯ ในวันสุดท้ายของ เดือนที่ครบอายุเกษียณ
                หรือในวันสิ้นปีของปีที่ครบเกษียณได้ โดย
                ต้องแจ้งความประสงค์ต่อบริษัทฯภายในเดือนกรกฎาคมของปีก่อนที่
                อายุจะครบเกษียณนั้น`,_e=u(),Q=r("p"),ee=y(`เนื่องจากในปีหน้า ท่านจะครบกําหนดเกษียณอายุงานกับบริษัทฯ แล้ว
                บริษัทฯ จึงแจ้งมายังท่านเพื่อขอให้
                ท่านใช้สิทธิ์เลือกกําหนดวันพ้นสภาพการเป็นพนักงานตามนโยบายฯ
                ข้างต้นโดยทําเครื่องหมายเลือกพร้อมทั้งลงชื่อยืนยัน
                ในแบบฟอร์มของท้ายหนังสือ`),oe=r("span"),oe.textContent=`ภายในเดือนกรกฎาคม ${l[10]}`,I=u(),ne=r("p"),ne.textContent=`อนึ่ง หากท่านไม่แสดงความประสงค์ตามเอกสารฉบับนี้
                ภายในเวลาที่กําหนด บริษัทฯ จะถือว่าท่าน สละสิทธิ์การเลือก
                โดยถือเอาวันสุดท้ายของเดือนที่ท่านครบอายุเกษียณ
                เป็นวันพ้นสภาพการเป็นพนักงาน`,re=u(),ie=r("p"),ie.innerHTML=`<span>นายวิโรจน์ วงศ์สถิรยาคุณ</span><br/> 
                <span>ผู้จัดการฝ่ายบริหารจัดการทรัพยากรบุคคลและองค์กร</span>`,pe=u(),j=r("div"),O=r("p"),X=y("เรียน ผู้จัดการฝ่ายบริหารจัดการทรัพยากรบุคคลและองค์กร ผ่าน "),J=y(se),de=u(),d=y(q),L=u(),Z=y(F),ge=u(),w=r("p"),H=y("ข้าพเจ้า "),S=y(k),Fe=y(Re),Ve=y(`
                ขอเลือกการพ้นสภาพจากการเป็นพนักงานของบริษัท ตามที่ข้าพเข้าได้ทำการเลือกทำเครื่องหมายไว้`),Oe=u(),ve=r("div");for(let _=0;_<C.length;_+=1)C[_].c();Ne=u(),D=r("div"),fe=r("span"),be=r("span"),be.textContent="Employee Name :",Ie=u(),$e=r("span"),v=y(i),ze=u(),ce=r("span"),he=r("span"),he.textContent="Submit Date :",Ae=u(),ye=r("span"),Le=y(ke),We=u(),ue=r("span"),Se=r("span"),Se.textContent="Immediate Line/Section Head :",Be=u(),Ce=r("span"),ft=y(Je),bt=u(),Te=r("span"),Ke=r("span"),Ke.textContent="Approve Date :",$t=u(),Qe=r("span"),ct=y(Xe),ht=u(),je=r("span"),Ze=r("span"),Ze.textContent="Department Head :",yt=u(),xe=r("span"),ut=y(et),kt=u(),Ee=r("span"),tt=r("span"),tt.textContent="Approve Date :",St=u(),nt=r("span"),mt=y(st),Ct=u(),Me=r("span"),lt=r("span"),lt.textContent="Completed Date :",wt=u(),at=r("span"),dt=y(ot),Ht=u(),Pe=r("span"),rt=r("span"),rt.textContent="Retirement Date :",Dt=u(),it=r("span"),vt=y(pt),p(n,"class","font-weight-bold text-[1.4em] flex justify-center my-3"),p(f,"class","font-weight-bold mb-2"),p(K,"class","font-weight-bold"),p(A,"class","mb-4"),p(te,"class","indent-6"),p(oe,"class","font-weight-bold"),p(Q,"class","indent-6"),p(ne,"class","indent-6"),p(ie,"class","self-end text-center"),p(P,"class","flex flex-col gap-y-4 mb-4"),p(w,"class","indent-6"),p(ve,"class","flex flex-col items-start px-6 desktop:flex-row justify-around"),p(j,"class","bg-gray-300 px-2 py-3 flex flex-col gap-y-2 mb-4"),p(be,"class","svelte-166y3c6"),p($e,"class","svelte-166y3c6"),p(fe,"class","svelte-166y3c6"),p(he,"class","svelte-166y3c6"),p(ye,"class","svelte-166y3c6"),p(ce,"class","svelte-166y3c6"),p(Se,"class","svelte-166y3c6"),p(Ce,"class","svelte-166y3c6"),p(ue,"class","svelte-166y3c6"),p(Ke,"class","svelte-166y3c6"),p(Qe,"class","svelte-166y3c6"),p(Te,"class","svelte-166y3c6"),p(Ze,"class","svelte-166y3c6"),p(xe,"class","svelte-166y3c6"),p(je,"class","svelte-166y3c6"),p(tt,"class","svelte-166y3c6"),p(nt,"class","svelte-166y3c6"),p(Ee,"class","svelte-166y3c6"),p(lt,"class","svelte-166y3c6"),p(at,"class","svelte-166y3c6"),p(Me,"class","svelte-166y3c6"),p(rt,"class","svelte-166y3c6"),p(it,"class","svelte-166y3c6"),p(Pe,"class","svelte-166y3c6"),p(D,"class","grid desktop:grid-cols-2 grid-cols-1 gap-y-2 _retirement-detail svelte-166y3c6"),p(e,"class","desktop:px-[10.8rem]")},m(_,b){E(_,e,b),t(e,n),t(e,s),t(e,f),t(f,a),t(f,c),t(e,m),t(e,z),t(e,h),t(e,A),t(A,W),t(A,K),t(K,B),t(K,x),t(e,ae),t(e,P),t(P,te),t(P,_e),t(P,Q),t(Q,ee),t(Q,oe),t(P,I),t(P,ne),t(P,re),t(P,ie),t(e,pe),t(e,j),t(j,O),t(O,X),t(O,J),t(O,de),t(O,d),t(O,L),t(O,Z),t(j,ge),t(j,w),t(w,H),t(w,S),t(w,Fe),t(w,Ve),t(j,Oe),t(j,ve);for(let R=0;R<C.length;R+=1)C[R]&&C[R].m(ve,null);t(e,Ne),t(e,D),t(D,fe),t(fe,be),t(fe,Ie),t(fe,$e),t($e,v),t(D,ze),t(D,ce),t(ce,he),t(ce,Ae),t(ce,ye),t(ye,Le),t(D,We),t(D,ue),t(ue,Se),t(ue,Be),t(ue,Ce),t(Ce,ft),t(D,bt),t(D,Te),t(Te,Ke),t(Te,$t),t(Te,Qe),t(Qe,ct),t(D,ht),t(D,je),t(je,Ze),t(je,yt),t(je,xe),t(xe,ut),t(D,kt),t(D,Ee),t(Ee,tt),t(Ee,St),t(Ee,nt),t(nt,mt),t(D,Ct),t(D,Me),t(Me,lt),t(Me,wt),t(Me,at),t(at,dt),t(D,Ht),t(D,Pe),t(Pe,rt),t(Pe,Dt),t(Pe,it),t(it,vt),T=!0},p(_,b){if((!T||b[0]&4)&&o!==(o=Mt(_[2].createdDate)+"")&&N(c,o),(!T||b[0]&4)&&V!==(V=_[2].employeeNameTH+"")&&N(x,V),(!T||b[0]&4)&&se!==(se=(_[2].sectionHeadPositionTH??"")+"")&&N(J,se),(!T||b[0]&4)&&q!==(q=_[2].sectionHeadPositionTH?"และ":"")&&N(d,q),(!T||b[0]&4)&&F!==(F=(_[2].departmentHeadPositionTH??"")+"")&&N(Z,F),(!T||b[0]&4)&&k!==(k=_[2].employeeTitle+"")&&N(S,k),(!T||b[0]&4)&&Re!==(Re=_[2].employeeNameTH+"")&&N(Fe,Re),b[0]&5){we=_[0];let R;for(R=0;R<we.length;R+=1){const Rt=Pt(_,we,R);C[R]?(C[R].p(Rt,b),g(C[R],1)):(C[R]=Bt(Rt),C[R].c(),g(C[R],1),C[R].m(ve,null))}for(Ye(),R=we.length;R<C.length;R+=1)Gt(R);Ge()}(!T||b[0]&4)&&i!==(i=_[2].employeeNameEN+"")&&N(v,i),(!T||b[0]&4)&&ke!==(ke=le(_[2].submittedDate)+"")&&N(Le,ke),(!T||b[0]&4)&&Je!==(Je=_[2].sectionHead+"")&&N(ft,Je),(!T||b[0]&4)&&Xe!==(Xe=le(_[2].sectionHeadApproveDate)+"")&&N(ct,Xe),(!T||b[0]&4)&&et!==(et=_[2].departmentHead+"")&&N(ut,et),(!T||b[0]&4)&&st!==(st=le(_[2].departmentHeadApproveDate)+"")&&N(mt,st),(!T||b[0]&4)&&ot!==(ot=le(_[2].completedDate)+"")&&N(dt,ot),(!T||b[0]&4)&&pt!==(pt=le(_[2].retirementDate)+"")&&N(vt,pt)},i(_){if(!T){for(let b=0;b<we.length;b+=1)g(C[b]);T=!0}},o(_){C=C.filter(Boolean);for(let b=0;b<C.length;b+=1)$(C[b]);T=!1},d(_){_&&M(e),nn(C,_)}}}function un(l){let e;return{c(){e=r("div"),e.innerHTML=`<span>คุณต้องการ</span> 
      <span class="text-secondary">Submit</span> 
      <span>ใช่หรือไม่ ?</span> 
      <span>(Do you want to</span> 
      <span class="text-secondary">Submit</span> 
      <span>?)</span>`,p(e,"class","text-size-xlarge text-center mb-3")},m(n,s){E(n,e,s)},p:Ue,d(n){n&&M(e)}}}function mn(l){let e;return{c(){e=r("div"),e.textContent="ยืนยันการ Submit (Submit Confirmation)",p(e,"slot","title")},m(n,s){E(n,e,s)},p:Ue,d(n){n&&M(e)}}}function dn(l){let e;return{c(){e=r("div"),e.innerHTML=`<span>คุณต้องการ</span> 
      <span class="text-secondary">Approve</span> 
      <span>ใช่หรือไม่ ?</span> 
      <span>(Do you want to</span> 
      <span class="text-secondary">Approve</span> 
      <span>?)</span>`,p(e,"class","text-size-xlarge text-center mb-3")},m(n,s){E(n,e,s)},p:Ue,d(n){n&&M(e)}}}function vn(l){let e;return{c(){e=r("div"),e.textContent="ยืนยันการ Approve (Approve Confirmation)",p(e,"slot","title")},m(n,s){E(n,e,s)},p:Ue,d(n){n&&M(e)}}}function _n(l){let e,n,s,f,a;return n=new De({props:{clear:!0,class:"mr-2 w-[96px]",label:"Cancel"}}),n.$on("click",l[23]),f=new De({props:{primary:!1,secondary:!0,class:"w-[96px]",label:"Approve",isLoading:l[1]}}),f.$on("click",l[24]),{c(){e=r("div"),Y(n.$$.fragment),s=u(),Y(f.$$.fragment),p(e,"slot","footer"),p(e,"class","flex")},m(o,c){E(o,e,c),G(n,e,null),t(e,s),G(f,e,null),a=!0},p(o,c){const m={};c[0]&2&&(m.isLoading=o[1]),f.$set(m)},i(o){a||(g(n.$$.fragment,o),g(f.$$.fragment,o),a=!0)},o(o){$(n.$$.fragment,o),$(f.$$.fragment,o),a=!1},d(o){o&&M(e),U(n),U(f)}}}function gn(l){let e,n,s,f,a,o,c;function m(h){l[26](h)}let z={required:!0,label:"กรอกความคิดเห็น (Comment)"};return l[3]!==void 0&&(z.value=l[3]),a=new on({props:z}),He.push(()=>qt(a,"value",m)),{c(){e=r("div"),n=r("p"),n.innerHTML=`คุณต้องการ <span class="text-secondary3">Reject</span>
        การขออนุมัติใช่หรือไม่ ? (Do you want to
        <span class="text-secondary3">Reject</span> ?)`,s=u(),f=r("div"),Y(a.$$.fragment),p(n,"class","text-center mb-3 text-size-xlarge")},m(h,A){E(h,e,A),t(e,n),t(e,s),t(e,f),G(a,f,null),c=!0},p(h,A){const W={};!o&&A[0]&8&&(o=!0,W.value=h[3],Yt(()=>o=!1)),a.$set(W)},i(h){c||(g(a.$$.fragment,h),c=!0)},o(h){$(a.$$.fragment,h),c=!1},d(h){h&&M(e),U(a)}}}function bn(l){let e;return{c(){e=r("div"),e.innerHTML='<span class="font-weight-bold">ยืนยันการ Reject (Reject Confirmation)</span>',p(e,"slot","title")},m(n,s){E(n,e,s)},p:Ue,d(n){n&&M(e)}}}function $n(l){var ve,Ne,D,fe,be,Ie,$e;let e,n,s,f,a,o,c,m,z,h,A=(((ve=l[2])==null?void 0:ve.documentNo)??"-")+"",W,K,B,V,x,ae,P=(((D=(Ne=l[2])==null?void 0:Ne.currentStatus)==null?void 0:D.value)??"-")+"",te,_e,Q,ee,oe,I,ne,re,ie,pe,j,O,X,se,J,de,q,d,L,F,Z,ge,w=l[4]&&Ft(),H=((fe=l[2].currentStatus)==null?void 0:fe.key)===me.RetirementStatus.WaitingEmployeeSubmit&&l[2].canSubmit&&Nt(l),k=(((be=l[2].currentStatus)==null?void 0:be.key)===me.RetirementStatus.WaitingForApprovalSectionHead||((Ie=l[2].currentStatus)==null?void 0:Ie.key)===me.RetirementStatus.WaitingForApprovalDepartmentHead)&&It(l),S=l[2].canUploadPersonalFolder&&Wt(l);j=new sn({props:{class:"desktop:w-5/6",$$slots:{default:[cn]},$$scope:{ctx:l}}});let Re={onConfirm:l[13],nextLabel:"Submit",$$slots:{title:[mn],default:[un]},$$scope:{ctx:l}};X=new _t({props:Re}),l[22](X);let Fe={$$slots:{footer:[_n],title:[vn],default:[dn]},$$scope:{ctx:l}};J=new _t({props:Fe}),l[25](J);let Ve={isLoading:l[1],isReject:!0,onConfirm:l[17],$$slots:{title:[bn],default:[gn]},$$scope:{ctx:l}};q=new _t({props:Ve}),l[27](q);let Oe={mapStatusText:Xt,histories:($e=l[2])==null?void 0:$e.approvalHistories};return L=new an({props:Oe}),l[28](L),{c(){w&&w.c(),e=u(),n=r("div"),s=r("div"),s.innerHTML=`<span class="icon _icon svelte-166y3c6"><i class="ic ic-retirement-square"></i></span> 
      <span><div>Employee Retirement Date Confirmation</div> 
        <div class="font-weight-bold text-size-xlarge">Retirement Date Confirmation</div></span>`,f=u(),a=r("div"),o=r("div"),c=r("div"),m=r("div"),m.textContent="Document No. :",z=u(),h=r("div"),W=y(A),K=u(),B=r("div"),V=r("div"),V.textContent="Current Status :",x=u(),ae=r("div"),te=y(P),_e=u(),Q=r("div"),ee=r("span"),ee.innerHTML=`<span class="icon text-gray-800"><i class="ic ic-history"></i></span> 
            <span class="text-size-normal underline">ประวัติการอนุมัติ</span>`,oe=u(),I=r("div"),H&&H.c(),ne=u(),k&&k.c(),re=u(),S&&S.c(),ie=u(),pe=r("div"),Y(j.$$.fragment),O=u(),Y(X.$$.fragment),se=u(),Y(J.$$.fragment),de=u(),Y(q.$$.fragment),d=u(),Y(L.$$.fragment),p(s,"class","icon-text _icon-text svelte-166y3c6"),p(m,"class","text-gray-900 desktop:mr-1"),p(h,"class","font-weight-bold"),p(c,"class","mb-1.5 desktop:flex desktop:mb-0"),p(V,"class","text-gray-900 desktop:mr-1"),p(ae,"class","font-weight-bold"),p(B,"class","mb-1.5 desktop:flex desktop:mb-0 no-print"),p(ee,"class","icon-text text-size-xlarge cursor-pointer"),p(Q,"class","mb-3 desktop:mb-0 no-print"),p(I,"class","flex justify-end desktop:gap-2 no-print"),p(o,"class","desktop:flex desktop:items-center desktop:justify-between desktop:pl-7 desktop:pr-4"),p(pe,"class","mt-2 desktop:flex justify-center"),p(a,"class","print-body svelte-166y3c6"),Lt(a,"print-body--pdf",l[4]),p(n,"class","bg-gray-100 border-gray-400 border p-2 rounded")},m(i,v){w&&w.m(i,v),E(i,e,v),E(i,n,v),t(n,s),t(n,f),t(n,a),t(a,o),t(o,c),t(c,m),t(c,z),t(c,h),t(h,W),t(o,K),t(o,B),t(B,V),t(B,x),t(B,ae),t(ae,te),t(o,_e),t(o,Q),t(Q,ee),t(o,oe),t(o,I),H&&H.m(I,null),t(I,ne),k&&k.m(I,null),t(I,re),S&&S.m(I,null),t(a,ie),t(a,pe),G(j,pe,null),l[21](a),E(i,O,v),G(X,i,v),E(i,se,v),G(J,i,v),E(i,de,v),G(q,i,v),E(i,d,v),G(L,i,v),F=!0,Z||(ge=Zt(ee,"click",l[19]),Z=!0)},p(i,v){var ke,Le,We,ue,Se,Be,Ce;i[4]?w||(w=Ft(),w.c(),w.m(e.parentNode,e)):w&&(w.d(1),w=null),(!F||v[0]&4)&&A!==(A=(((ke=i[2])==null?void 0:ke.documentNo)??"-")+"")&&N(W,A),(!F||v[0]&4)&&P!==(P=(((We=(Le=i[2])==null?void 0:Le.currentStatus)==null?void 0:We.value)??"-")+"")&&N(te,P),((ue=i[2].currentStatus)==null?void 0:ue.key)===me.RetirementStatus.WaitingEmployeeSubmit&&i[2].canSubmit?H?(H.p(i,v),v[0]&4&&g(H,1)):(H=Nt(i),H.c(),g(H,1),H.m(I,ne)):H&&(Ye(),$(H,1,1,()=>{H=null}),Ge()),((Se=i[2].currentStatus)==null?void 0:Se.key)===me.RetirementStatus.WaitingForApprovalSectionHead||((Be=i[2].currentStatus)==null?void 0:Be.key)===me.RetirementStatus.WaitingForApprovalDepartmentHead?k?(k.p(i,v),v[0]&4&&g(k,1)):(k=It(i),k.c(),g(k,1),k.m(I,re)):k&&(Ye(),$(k,1,1,()=>{k=null}),Ge()),i[2].canUploadPersonalFolder?S?(S.p(i,v),v[0]&4&&g(S,1)):(S=Wt(i),S.c(),g(S,1),S.m(I,null)):S&&(Ye(),$(S,1,1,()=>{S=null}),Ge());const ze={};v[0]&5|v[1]&64&&(ze.$$scope={dirty:v,ctx:i}),j.$set(ze),(!F||v[0]&16)&&Lt(a,"print-body--pdf",i[4]);const ce={};v[1]&64&&(ce.$$scope={dirty:v,ctx:i}),X.$set(ce);const he={};v[0]&258|v[1]&64&&(he.$$scope={dirty:v,ctx:i}),J.$set(he);const Ae={};v[0]&2&&(Ae.isLoading=i[1]),v[0]&8|v[1]&64&&(Ae.$$scope={dirty:v,ctx:i}),q.$set(Ae);const ye={};v[0]&4&&(ye.histories=(Ce=i[2])==null?void 0:Ce.approvalHistories),L.$set(ye)},i(i){F||(g(H),g(k),g(S),g(j.$$.fragment,i),g(X.$$.fragment,i),g(J.$$.fragment,i),g(q.$$.fragment,i),g(L.$$.fragment,i),F=!0)},o(i){$(H),$(k),$(S),$(j.$$.fragment,i),$(X.$$.fragment,i),$(J.$$.fragment,i),$(q.$$.fragment,i),$(L.$$.fragment,i),F=!1},d(i){w&&w.d(i),i&&M(e),i&&M(n),H&&H.d(),k&&k.d(),S&&S.d(),U(j),l[21](null),i&&M(O),l[22](null),U(X,i),i&&M(se),l[25](null),U(J,i),i&&M(de),l[27](null),U(q,i),i&&M(d),l[28](null),U(L,i),Z=!1,ge()}}}function hn(l){let e,n;return e=new Jt({props:{$$slots:{default:[$n]},$$scope:{ctx:l}}}),{c(){Y(e.$$.fragment)},m(s,f){G(e,s,f),n=!0},p(s,f){const a={};f[0]&1023|f[1]&64&&(a.$$scope={dirty:f,ctx:s}),e.$set(a)},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function yn(l,e,n){const s=new Date().getFullYear()+543;let f=[],a=At.retirementId??"",o=At.parent??Kt.RetirementWaitingList,c=!1,m={},z="",h=!1,A,W,K,B,V;function x(){Et(o)}function ae(){x()}function P(){var d;if(!((d=m.retirementChoice)!=null&&d.key)){gt.error("Please select retirement choice");return}K.open()}function te(){n(1,c=!0),qe.SubmitRetirement({retirement:m}).then(()=>{n(1,c=!1),x()}).catch(()=>{n(1,c=!1)})}function _e(){B.open()}async function Q(){var d;n(1,c=!0);try{await qe.ApproveRetirement({retirementId:a,status:m.currentStatus.key}),((d=m.currentStatus)==null?void 0:d.key)===me.RetirementStatus.WaitingForApprovalDepartmentHead?(n(2,m.departmentHeadApproveDate=new Date,m),n(2,m.completedDate=new Date,m),await Tt(),ee()):(n(1,c=!1),x())}catch(L){console.log("error",L),n(1,c=!1)}}async function ee(){n(4,h=!0),await Tt();const d="retirement-detail",L=await xt.export(A,{fileName:d,landscape:!0,margin:!1,scale:.6,save:!1}),F=await en({base64:L,name:d,parentId:a});qe.ESSService_PersonelFolder({fileId:F,employeeId:m.employeeId,recordId:a}).then(()=>{n(1,c=!1),n(4,h=!1),x()}).catch(()=>{n(1,c=!1),n(4,h=!1),gt.error("Personnel Folder Error")})}function oe(){n(1,c=!0);const{isValid:d}=fn({rejectComment:z});if(!d){n(1,c=!1);return}qe.RejectRetirement({retirementId:a,rejectComment:z,status:m.currentStatus.key}).then(L=>{n(1,c=!1),W.close(),re()}).catch(()=>{n(1,c=!1)})}function I(){W.open()}function ne(){V.open()}function re(){qe.GetRetirementDetail({retirementId:a}).then(d=>{var L;if(d){n(2,m=d);const F=jt.findIndex(Z=>Z.key===(d.isSixtyYears?me.RetirementChoice.ExactDateFor55Years:me.RetirementChoice.ExactDateFor60Years));F>-1&&n(0,f=jt.map((Z,ge)=>ge===F?null:Z).filter(Z=>!!Z)),(L=m.retirementChoice)!=null&&L.key||n(2,m.retirementChoice=f[0],m)}else Et(o)})}Qt(()=>{re()});function ie(d){l.$$.not_equal(m.retirementChoice,d)&&(m.retirementChoice=d,n(2,m))}function pe(d){He[d?"unshift":"push"](()=>{A=d,n(5,A)})}function j(d){He[d?"unshift":"push"](()=>{K=d,n(7,K)})}const O=()=>{B.close()},X=()=>{Q()};function se(d){He[d?"unshift":"push"](()=>{B=d,n(8,B)})}function J(d){z=d,n(3,z)}function de(d){He[d?"unshift":"push"](()=>{W=d,n(6,W)})}function q(d){He[d?"unshift":"push"](()=>{V=d,n(9,V)})}return[f,c,m,z,h,A,W,K,B,V,s,ae,P,te,_e,Q,ee,oe,I,ne,ie,pe,j,O,X,se,J,de,q]}class kn extends Ut{constructor(e){super(),Vt(this,e,yn,hn,Ot,{},null,[-1,-1])}}new kn({target:document.getElementById("app")});
