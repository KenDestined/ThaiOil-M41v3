import{T as Bt,B as Et}from"./BaseDropdown.js";import{S as bt,i as $t,s as Ct,e as l,t as w,a as r,c as u,d as Z,f as t,g as y,h as x,D as Ht,G as jt,H as At,n as St,m as Ot,o as Yt,p as ct,q as it,w as qt,r as ht,u as wt,v as vt,A as Ft}from"./vendor.js";import{m as Gt,T as It}from"./dataManagementTabs.js";import{E as Pt}from"./ExportButton.js";function Dt(o,e,s){const k=o.slice();return k[4]=e[s],k}function Mt(o,e){let s,k,T=e[4].name+"",d,b,_,v,p,a,m=e[4].workType.staff.male.hours+"",B,c,j,C=e[4].workType.staff.female.hours+"",E,W,A,f=e[4].workType.staff.total.hours+"",H,O,g,Y,tt,et,q=e[4].workType.contractor.male.hours+"",z,at,lt,D=e[4].workType.contractor.female.hours+"",J,ft,L,F=e[4].workType.contractor.total.hours+"",K,ot,S,G,st,Q,I=e[4].workType.staff.male.hours+e[4].workType.contractor.male.hours+"",N,rt,V,M=e[4].workType.staff.female.hours+e[4].workType.contractor.female.hours+"",R,ut,P,U=e[4].workType.staff.total.hours+e[4].workType.contractor.total.hours+"",X;return{key:o,first:null,c(){s=l("tr"),k=l("td"),d=w(T),_=r(),v=l("td"),v.textContent="staff",p=r(),a=l("td"),B=w(m),c=r(),j=l("td"),E=w(C),W=r(),A=l("td"),H=w(f),O=r(),g=l("tr"),Y=l("td"),Y.textContent="contractor",tt=r(),et=l("td"),z=w(q),at=r(),lt=l("td"),J=w(D),ft=r(),L=l("td"),K=w(F),ot=r(),S=l("tr"),G=l("td"),G.textContent="total",st=r(),Q=l("td"),N=w(I),rt=r(),V=l("td"),R=w(M),ut=r(),P=l("td"),X=w(U),u(k,"rowspan",b=3),u(k,"class","_col-total _company"),u(v,"class","_col-total _work-type"),u(Y,"class","_col-total _work-type"),u(G,"class","_col-total _work-type-total"),u(Q,"class","_col-total _total"),u(V,"class","_col-total _total"),u(P,"class","_col-total _total"),this.first=s},m($,i){Z($,s,i),t(s,k),t(k,d),t(s,_),t(s,v),t(s,p),t(s,a),t(a,B),t(s,c),t(s,j),t(j,E),t(s,W),t(s,A),t(A,H),Z($,O,i),Z($,g,i),t(g,Y),t(g,tt),t(g,et),t(et,z),t(g,at),t(g,lt),t(lt,J),t(g,ft),t(g,L),t(L,K),Z($,ot,i),Z($,S,i),t(S,G),t(S,st),t(S,Q),t(Q,N),t(S,rt),t(S,V),t(V,R),t(S,ut),t(S,P),t(P,X)},p($,i){e=$,i&1&&T!==(T=e[4].name+"")&&y(d,T),i&1&&m!==(m=e[4].workType.staff.male.hours+"")&&y(B,m),i&1&&C!==(C=e[4].workType.staff.female.hours+"")&&y(E,C),i&1&&f!==(f=e[4].workType.staff.total.hours+"")&&y(H,f),i&1&&q!==(q=e[4].workType.contractor.male.hours+"")&&y(z,q),i&1&&D!==(D=e[4].workType.contractor.female.hours+"")&&y(J,D),i&1&&F!==(F=e[4].workType.contractor.total.hours+"")&&y(K,F),i&1&&I!==(I=e[4].workType.staff.male.hours+e[4].workType.contractor.male.hours+"")&&y(N,I),i&1&&M!==(M=e[4].workType.staff.female.hours+e[4].workType.contractor.female.hours+"")&&y(R,M),i&1&&U!==(U=e[4].workType.staff.total.hours+e[4].workType.contractor.total.hours+"")&&y(X,U)},d($){$&&x(s),$&&x(O),$&&x(g),$&&x(ot),$&&x(S)}}}function Ut(o){let e,s,k,T,d,b,_,v,p,a=[],m=new Map,B,c,j,C,E,W,A,f=o[3]().male+"",H,O,g,Y=o[3]().female+"",tt,et,q,z=o[3]().total+"",at,lt,D,J,ft,L,F=o[2]().male+"",K,ot,S,G=o[2]().female+"",st,Q,I,N=o[2]().total+"",rt,V,M,R,ut,P,U=o[3]().male+o[2]().male+"",X,$,i,pt=o[3]().female+o[2]().female+"",yt,Tt,mt,_t=o[3]().total+o[2]().total+"",kt,dt=o[0];const gt=n=>n[4].id;for(let n=0;n<dt.length;n+=1){let h=Dt(o,dt,n),nt=gt(h);m.set(nt,a[n]=Mt(nt,h))}return{c(){e=l("div"),s=l("div"),k=w("Staff Man-Hours "),T=w(o[1]),d=r(),b=l("table"),_=l("thead"),_.innerHTML=`<tr><th class="_head-col-total">Company</th> 
        <th class="_head-col-total">Work Type</th> 
        <th class="_head-col-total _male">Male</th> 
        <th class="_head-col-total _female">Female</th> 
        <th class="_head-col-total _total">Total</th></tr>`,v=r(),p=l("tbody");for(let n=0;n<a.length;n+=1)a[n].c();B=r(),c=l("tr"),j=l("td"),j.textContent="TOP GROUP",C=r(),E=l("td"),E.textContent="staff",W=r(),A=l("td"),H=w(f),O=r(),g=l("td"),tt=w(Y),et=r(),q=l("td"),at=w(z),lt=r(),D=l("tr"),J=l("td"),J.textContent="contractor",ft=r(),L=l("td"),K=w(F),ot=r(),S=l("td"),st=w(G),Q=r(),I=l("td"),rt=w(N),V=r(),M=l("tr"),R=l("td"),R.textContent="total",ut=r(),P=l("td"),X=w(U),$=r(),i=l("td"),yt=w(pt),Tt=r(),mt=l("td"),kt=w(_t),u(s,"class","_box-title push-bottom-2"),u(j,"rowspan",3),u(j,"class","_col-total _company-group"),u(E,"class","_col-total _work-type"),u(A,"class","_col-total _group"),u(g,"class","_col-total _group"),u(q,"class","_col-total _group"),u(J,"class","_col-total _work-type"),u(L,"class","_col-total _group"),u(S,"class","_col-total _group"),u(I,"class","_col-total _group"),u(R,"class","_col-total _work-type-group-total"),u(P,"class","_col-total _group-total"),u(i,"class","_col-total _group-total"),u(mt,"class","_col-total _group-grand-total"),u(b,"class","_total-table"),Ht(b,"width","100%"),u(e,"class","box")},m(n,h){Z(n,e,h),t(e,s),t(s,k),t(s,T),t(e,d),t(e,b),t(b,_),t(b,v),t(b,p);for(let nt=0;nt<a.length;nt+=1)a[nt].m(p,null);t(p,B),t(p,c),t(c,j),t(c,C),t(c,E),t(c,W),t(c,A),t(A,H),t(c,O),t(c,g),t(g,tt),t(c,et),t(c,q),t(q,at),t(p,lt),t(p,D),t(D,J),t(D,ft),t(D,L),t(L,K),t(D,ot),t(D,S),t(S,st),t(D,Q),t(D,I),t(I,rt),t(p,V),t(p,M),t(M,R),t(M,ut),t(M,P),t(P,X),t(M,$),t(M,i),t(i,yt),t(M,Tt),t(M,mt),t(mt,kt)},p(n,[h]){h&2&&y(T,n[1]),h&1&&(dt=n[0],a=jt(a,h,gt,1,n,dt,m,p,At,Mt,B,Dt)),h&8&&f!==(f=n[3]().male+"")&&y(H,f),h&8&&Y!==(Y=n[3]().female+"")&&y(tt,Y),h&8&&z!==(z=n[3]().total+"")&&y(at,z),h&4&&F!==(F=n[2]().male+"")&&y(K,F),h&4&&G!==(G=n[2]().female+"")&&y(st,G),h&4&&N!==(N=n[2]().total+"")&&y(rt,N),h&12&&U!==(U=n[3]().male+n[2]().male+"")&&y(X,U),h&12&&pt!==(pt=n[3]().female+n[2]().female+"")&&y(yt,pt),h&12&&_t!==(_t=n[3]().total+n[2]().total+"")&&y(kt,_t)},i:St,o:St,d(n){n&&x(e);for(let h=0;h<a.length;h+=1)a[h].d()}}}function zt(o,e,s){let k,T,{companies:d=[]}=e,{year:b}=e;return o.$$set=_=>{"companies"in _&&s(0,d=_.companies),"year"in _&&s(1,b=_.year)},o.$$.update=()=>{o.$$.dirty&1&&s(3,k=()=>{let _=d.map(a=>a.workType.staff.male.hours).reduce((a,m)=>a+m,0),v=d.map(a=>a.workType.staff.female.hours).reduce((a,m)=>a+m,0),p=d.map(a=>a.workType.staff.total.hours).reduce((a,m)=>a+m,0);return{male:_,female:v,total:p}}),o.$$.dirty&1&&s(2,T=()=>{let _=d.map(a=>a.workType.contractor.male.hours).reduce((a,m)=>a+m,0),v=d.map(a=>a.workType.contractor.female.hours).reduce((a,m)=>a+m,0),p=d.map(a=>a.workType.contractor.total.hours).reduce((a,m)=>a+m,0);return{male:_,female:v,total:p}})},[d,b,T,k]}class Jt extends bt{constructor(e){super();$t(this,e,zt,Ut,Ct,{companies:0,year:1})}}function Lt(o){let e,s,k,T,d,b,_,v,p,a,m,B,c,j,C,E;d=new Bt({props:{activeTab:o[2],tabs:Gt,isUnsavedChanges:!1}});function W(f){o[5](f)}let A={label:"Year",name:"year",options:o[3],isHorizontal:!0};return o[1]!==void 0&&(A.value=o[1]),p=new Et({props:A}),Ot.push(()=>Yt(p,"value",W)),c=new Pt({props:{onSave:o[4],canEdit:!1}}),C=new Jt({props:{year:o[1],companies:o[0]}}),{c(){e=l("main"),s=l("div"),s.textContent="Man Hours",k=r(),T=l("div"),ct(d.$$.fragment),b=r(),_=l("div"),v=l("div"),ct(p.$$.fragment),m=r(),B=l("div"),ct(c.$$.fragment),j=r(),ct(C.$$.fragment),u(s,"class","text-center text-weight-bold push-bottom-3 _title svelte-1k6ldyi"),u(T,"class","push-bottom-3"),u(v,"class","is-flex"),u(_,"class","_filter-wrapper push-bottom-3 svelte-1k6ldyi")},m(f,H){Z(f,e,H),t(e,s),t(e,k),t(e,T),it(d,T,null),t(e,b),t(e,_),t(_,v),it(p,v,null),t(_,m),t(_,B),it(c,B,null),t(e,j),it(C,e,null),E=!0},p(f,[H]){const O={};!a&&H&2&&(a=!0,O.value=f[1],qt(()=>a=!1)),p.$set(O);const g={};H&2&&(g.year=f[1]),H&1&&(g.companies=f[0]),C.$set(g)},i(f){E||(ht(d.$$.fragment,f),ht(p.$$.fragment,f),ht(c.$$.fragment,f),ht(C.$$.fragment,f),E=!0)},o(f){wt(d.$$.fragment,f),wt(p.$$.fragment,f),wt(c.$$.fragment,f),wt(C.$$.fragment,f),E=!1},d(f){f&&x(e),vt(d),vt(p),vt(c),vt(C)}}}function Nt(o,e,s){let k=It.Total,T;const b=new Date().getFullYear(),_=Array.from({length:5},(m,B)=>b-B);let v=b;Ft(async()=>{window.getData=()=>{const m=JSON.parse(document.getElementById("rawData").innerText);s(0,T=m.companies)},window.getData()});function p(){}function a(m){v=m,s(1,v)}return[T,v,k,_,p,a]}class Rt extends bt{constructor(e){super();$t(this,e,Nt,Lt,Ct,{})}}new Rt({target:document.getElementById("app")});
